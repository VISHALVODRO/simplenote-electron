(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1317:function(e,t,n){"use strict";n.r(t),n.d(t,"bootWithToken",(function(){return tc}));n(654),n(655),n(656),n(657),n(658),n(659),n(660),n(661),n(662),n(663),n(664),n(665),n(666),n(667),n(668),n(669),n(670),n(671),n(672),n(673),n(674),n(675),n(676),n(677),n(678),n(679),n(680),n(302),n(681),n(682),n(683),n(684),n(685),n(686),n(687),n(688),n(689),n(690),n(691),n(692),n(693),n(695),n(697),n(698),n(699),n(700),n(701),n(702),n(703),n(704),n(705),n(706),n(707),n(708),n(710),n(711),n(712),n(713),n(714),n(715),n(716),n(717),n(718),n(719),n(720),n(721),n(722),n(724),n(725),n(726),n(727),n(728),n(729),n(731),n(733),n(735),n(736),n(737),n(738),n(739),n(740),n(741),n(742),n(743),n(744),n(745),n(746),n(747),n(748),n(749),n(750),n(751),n(752),n(753),n(754),n(756),n(757),n(760),n(761),n(762),n(764),n(765),n(766),n(767),n(768),n(769),n(770),n(771),n(772),n(773),n(774),n(775),n(569),n(776),n(777),n(778),n(779),n(780),n(781),n(782),n(570),n(783),n(784),n(785),n(786),n(787),n(788),n(789),n(790),n(791),n(792),n(793),n(794),n(795),n(796),n(797),n(798),n(799),n(800),n(801),n(802),n(803),n(804),n(805),n(806),n(807),n(808),n(810),n(811),n(812),n(813),n(814),n(815),n(816),n(817),n(818),n(819),n(820),n(821),n(822),n(823),n(824),n(825),n(826),n(827),n(828),n(829),n(830),n(831),n(832),n(833),n(834),n(835),n(836),n(837),n(838),n(839),n(840),n(841),n(842),n(843),n(844),n(845),n(846),n(847),n(848),n(849),n(852),n(578),n(853),n(854);var r=n(0),o=n.n(r),a=n(130),i=(n(858),n(379)),c=n(3),u=n(646),l=n(203);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=function(e){var t=e.className,n=e.onChange,r=f(e,["className","onChange"]);return o.a.createElement("span",{className:"toggle-control ".concat(t)},o.a.createElement("input",s({type:"checkbox",onChange:function(e){var t=e.currentTarget.checked;return n(t)}},r)),o.a.createElement("span",{className:"toggle-control-layers"},o.a.createElement("span",{className:"toggle-control-unchecked-color"}),o.a.createElement("span",{className:"toggle-control-checked-color"}),o.a.createElement("span",{className:"toggle-control-knob"})))};function p(){return o.a.createElement("svg",{className:"icon-cross",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M18.707 4.707l-1.414-1.414L11 9.586 4.707 3.293 3.293 4.707 9.586 11l-6.293 6.293 1.414 1.414L11 12.414l6.293 6.293 1.414-1.414L12.414 11z"}))}var m=n(152);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(i,e);var t,n,r,a=b(i);function i(){var e;y(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S(O(e=a.call.apply(a,[this].concat(n))),"handleClickOutside",e.props.onOutsideClick),S(O(e),"copyPublishURL",(function(){e.publishUrlElement.select();try{document.execCommand("copy")}catch(e){return}e.copyUrlElement.focus()})),S(O(e),"getPublishURL",(function(e){return Object(c.isEmpty)(e)?null:"http://simp.ly/p/".concat(e)})),S(O(e),"pinNote",(function(t){return e.props.pinNote(e.props.noteId,t)})),S(O(e),"markdownNote",(function(t){return e.props.markdownNote(e.props.noteId,t)})),e}return t=i,(n=[{key:"render",value:function(){var e,t=this,n=this.props,r=n.isMarkdown,a=n.isPinned,i=n.note,s=i.modificationDate&&(e=i.modificationDate,Object(u.a)(1e3*e,"MMM d, yyyy h:mm a")),f=Object(c.includes)(i.systemTags,"published"),m=this.getPublishURL(i.publishURL);return o.a.createElement("div",{className:"note-info theme-color-bg theme-color-fg theme-color-border"},o.a.createElement("div",{className:"note-info-panel note-info-stats theme-color-border"},o.a.createElement("div",{className:"note-info-header"},o.a.createElement(l.a,{headingLevel:2},"Info"),o.a.createElement("button",{type:"button",className:"about-done button button-borderless",onClick:this.handleClickOutside},o.a.createElement(p,null))),s&&o.a.createElement("p",{className:"note-info-item"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Modified"),o.a.createElement("br",null),o.a.createElement("span",{className:"note-info-detail"},s))),o.a.createElement("p",{className:"note-info-item"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},((i.content||"").replace(/[\u200B]+/,"").trim().replace(/['";:,.?Â¿\-!Â¡]+/g,"").match(/\S+/g)||[]).length," words"))),o.a.createElement("p",{className:"note-info-item"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},function(e){return(e||"").replace(T,"_").length}(i.content)," characters")))),o.a.createElement("div",{className:"note-info-panel note-info-pin theme-color-border"},o.a.createElement("label",{className:"note-info-item",htmlFor:"note-info-pin-checkbox"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Pin to top")),o.a.createElement("span",{className:"note-info-item-control"},o.a.createElement(d,{id:"note-info-pin-checkbox",checked:a,onChange:this.pinNote})))),o.a.createElement("div",{className:"note-info-panel note-info-markdown theme-color-border"},o.a.createElement("label",{className:"note-info-item",htmlFor:"note-info-markdown-checkbox"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Markdown"),o.a.createElement("br",null),o.a.createElement("span",{className:"note-info-detail"},"Enable markdown formatting on this note."," ",o.a.createElement("a",{target:"_blank",href:"http://simplenote.com/help/#markdown",rel:"noopener noreferrer"},"Learn moreâ€¦"))),o.a.createElement("span",{className:"note-info-item-control"},o.a.createElement(d,{id:"note-info-markdown-checkbox",checked:r,onChange:this.markdownNote})))),f&&o.a.createElement("div",{className:"note-info-panel note-info-public-link theme-color-border"},o.a.createElement("span",{className:"note-info-item-text"},o.a.createElement("span",{className:"note-info-name"},"Public link"),o.a.createElement("div",{className:"note-info-form"},o.a.createElement("input",{ref:function(e){return t.publishUrlElement=e},className:"note-info-detail note-info-link-text",value:m,spellCheck:!1}),o.a.createElement("button",{ref:function(e){return t.copyUrlElement=e},type:"button",className:"button button-borderless note-info-copy-button",onClick:this.copyPublishURL},"Copy")))))}}])&&g(t.prototype,n),r&&g(t,r),i}(r.Component);S(N,"displayName","NoteInfo");var T=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;var _={markdownNote:m.a.data.markdownNote,onOutsideClick:m.a.ui.toggleNoteInfo,pinNote:m.a.data.pinNote},I=Object(a.b)((function(e){var t=e.data,n=e.ui.openedNote,r=t.notes.get(n);return{noteId:n,note:r,isMarkdown:null==r?void 0:r.systemTags.includes("markdown"),isPinned:null==r?void 0:r.systemTags.includes("pinned")}}),_)(Object(i.a)(N)),j=n(9),A=n(16),R=n(1318),C=Object(a.b)((function(e){return{connectionStatus:e.simperium.connectionStatus}}))((function(e){var t=e.connectionStatus;return o.a.createElement("div",{className:"navigation-bar__footer-item theme-color-fg-dim"},o.a.createElement(R.a,{enterDelay:200,classes:{tooltip:"icon-button__tooltip"},title:"green"===t?"Simplenote is communicating with the server.":"offline"===t?"Simplenote is operating in offline mode and changes won't be synchronized with the server until it connects again.":"Simplenote hasn't communicated with the server in a while; changes may not be synchronized with the server until the connection improves."},o.a.createElement("p",null,"Server connection: ","green"===t?"ðŸŸ¢":"ðŸ”´")))})),k=n(12),P=n.n(k),L=n(7),D=n.n(L),M=function(e){var t=e.icon,n=e.isSelected,r=void 0!==n&&n,a=e.label,i=e.onClick,c=D()("navigation-bar-item",{"is-selected":r}),u=D()("button","button-borderless","theme-color-fg");return o.a.createElement("div",{className:c},o.a.createElement("button",{type:"button",className:u,onClick:i},o.a.createElement("span",{className:"navigation-bar-item__icon"},t),a))};M.propTypes={icon:P.a.element.isRequired,isSelected:P.a.bool,label:P.a.string.isRequired,onClick:P.a.func.isRequired};var x=M,G=n(1301);function H(){return o.a.createElement("svg",{className:"icon-reorder",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M18 7H4V5h14v2zm2 3H2v2h18v-2zm-2 5H4v2h14v-2z"}))}function U(e){var t=e.onClick;return o.a.createElement("svg",{className:"icon-trash",onClick:t,xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M18 8.5V18a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8.5h2V18h10V8.5h2zM15 5V4a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2v1H3v2h16V5h-4zM9 4h4v1H9V4zm1 12V8.5H8V16h2zm4 0V8.5h-2V16h2z"}))}function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(i,e);var t,n,r,a=z(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={value:e.value},t}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.editable,r=t.isSelected,a=t.onClick,i=t.onDone,c=this.state.value,u=D()("tag-list-input","theme-color-fg",{"is-selected":r});return o.a.createElement("input",{className:u,readOnly:!n,onClick:a,value:c,onChange:function(t){return e.setState({value:t.target.value})},onBlur:i,spellCheck:!1})}}])&&B(t.prototype,n),r&&B(t,r),i}(r.Component),$=n(177);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ne(e);if(t){var o=ne(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ee(this,n)}}function ee(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?te(e):t}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ie=Object(G.c)((function(){return o.a.createElement(H,null)})),ce=Object(G.b)((function(e){var t=e.allowReordering,n=e.editingActive,r=e.isSelected,a=e.renameTag,i=e.selectTag,c=e.trashTag,u=oe(e.value,2),l=u[0],s=u[1];return o.a.createElement("li",{key:l,className:"tag-list-item","data-tag-name":s.name},n&&o.a.createElement(U,{onClick:function(){return c(s.name)}}),o.a.createElement(q,{editable:n,isSelected:r,onClick:function(){return!n&&i(l)},onDone:function(e){var t,n=null===(t=e.target)||void 0===t?void 0:t.value;n&&n!==s.name&&a(s.name,n)},value:s.name}),n&&t&&o.a.createElement(ie,null))})),ue=Object(G.a)((function(e){var t=e.editingTags,n=e.items,r=e.openedTag,a=e.openTag,i=e.renameTheTag,c=e.sortTagsAlpha,u=e.trashTheTag;return o.a.createElement("ul",{className:"tag-list-items"},n.map((function(e,n){return o.a.createElement(ce,{key:e[1].name,allowReordering:!c,editingActive:t,index:n,isSelected:r===e[0],renameTag:i,selectTag:a,trashTag:u,value:e})})))})),le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(i,e);var t,n,r,a=X(i);function i(){var e;Q(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return re(te(e=a.call.apply(a,[this].concat(n))),"reorderTag",(function(t){var n=t.newIndex,r=t.nodes[t.oldIndex].node.dataset.tagName;e.props.reorderTag(r,n)})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.editingTags,n=e.onEditTags,r=e.openTag,a=e.openedTag,i=e.renameTag,c=e.sortTagsAlpha,u=e.tags,s=e.trashTag,f=D()("tag-list",{"tag-list-editing":this.props.editingTags}),d=Array.from(u).sort((function(e,t){var n=oe(e,2),r=(n[0],n[1]),o=oe(t,2),a=(o[0],o[1]);return c?r.name.localeCompare(a.name):void 0!==r.index&&void 0!==a.index?r.index-a.index:void 0===r.index?1:-1}));return o.a.createElement("div",{className:f},o.a.createElement("div",{className:"tag-list-title"},o.a.createElement(l.a,{headingLevel:2},"Tags"),u.size>0&&o.a.createElement("button",{className:"tag-list-edit-toggle button button-borderless",tabIndex:0,onClick:n},t?"Done":"Edit")),o.a.createElement(ue,{editingTags:t,lockAxis:"y",openedTag:a,openTag:r,items:d,renameTheTag:i,sortTagsAlpha:c,onSortEnd:this.reorderTag,useDragHandle:!0,trashTheTag:s}))}}])&&Z(t.prototype,n),r&&Z(t,r),i}(r.Component);re(le,"displayName","TagList");var se={onEditTags:$.toggleTagEditing,openTag:$.openTag,renameTag:function(e,t){return{type:"RENAME_TAG",oldTagName:e,newTagName:t}},reorderTag:function(e,t){return{type:"REORDER_TAG",tagName:e,newIndex:t}},trashTag:function(e){return{type:"TRASH_TAG",tagName:e}}},fe=Object(a.b)((function(e){var t=e.data,n=e.settings.sortTagsAlpha,r=e.ui,o=r.editingTags,a=r.openedTag;return{editingTags:o,sortTagsAlpha:n,tags:t.tags[0],openedTag:a}}),se)(le);function de(){return o.a.createElement("svg",{className:"icon-notes",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M18 4v10H8V4h10m0-2H8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zM4 18V6a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2H4zM16 6h-6v2h6V6zm0 4h-6v2h6v-2z"}))}function pe(){return o.a.createElement("svg",{className:"icon-settings",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M14 21H8v-2.587c-.684-.278-1.33-.652-1.917-1.11L3.84 18.6l-3-5.198 2.242-1.294C3.028 11.734 3 11.364 3 11s.027-.735.08-1.108L.84 8.598l3-5.196 2.244 1.295C6.67 4.24 7.317 3.865 8 3.587V1h6v2.587c.684.278 1.33.653 1.917 1.11l2.243-1.295 3 5.196-2.24 1.294c.053.374.08.744.08 1.108 0 .363-.027.734-.08 1.107l2.24 1.294-3 5.198-2.244-1.296c-.586.458-1.233.833-1.916 1.11V21zm-4-2h2v-2.04l.715-.212c.887-.265 1.718-.745 2.402-1.393l.542-.51 1.768 1.02 1-1.732-1.768-1.02.17-.726c.114-.47.17-.938.17-1.387 0-.45-.057-.916-.17-1.39l-.17-.723 1.768-1.02-1-1.733-1.77 1.022-.54-.512c-.686-.647-1.517-1.128-2.403-1.392L12 5.04V3h-2v2.04l-.715.212c-.887.265-1.718.746-2.4 1.392l-.543.512-1.77-1.022-1 1.73 1.77 1.022-.173.726c-.113.47-.17.94-.17 1.388s.057.916.17 1.39l.17.724-1.768 1.02 1 1.733 1.77-1.02.542.51c.685.647 1.515 1.128 2.402 1.393l.714.21V19zm1-4c-2.206 0-4-1.794-4-4s1.794-4 4-4 4 1.794 4 4-1.794 4-4 4zm0-6c-1.103 0-2 .897-2 2s.897 2 2 2 2-.897 2-2-.897-2-2-2z"}))}var me=n(26);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=we(e);if(t){var o=we(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ee(this,n)}}function Ee(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?Oe(e):t}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(c,e);var t,n,a,i=be(c);function c(){var e;ye(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Se(Oe(e=i.call.apply(i,[this].concat(n))),"handleClickOutside",(function(){var t=e.props,n=t.isDialogOpen,r=t.onOutsideClick,o=t.showNavigation;n||o&&r()})),Se(Oe(e),"onHelpClicked",(function(){return Object(me.a)("http://simplenote.com/help")})),Se(Oe(e),"onSelectTrash",(function(){e.props.selectTrash(),j.a.tracks.recordEvent("list_trash_viewed")})),Se(Oe(e),"isSelected",(function(t){var n=t.isTrashRow,r=e.props,o=r.showTrash,a=r.openedTag;return n===o&&!a})),e}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.autoHideMenuBar,n=e.onAbout,a=e.onSettings,i=e.onShowAllNotes;return o.a.createElement("div",{className:"navigation-bar theme-color-bg theme-color-fg theme-color-border"},o.a.createElement("div",{className:"navigation-bar__folders"},o.a.createElement(x,{icon:o.a.createElement(de,null),isSelected:this.isSelected({isTrashRow:!1}),label:"All Notes",onClick:i}),o.a.createElement(x,{icon:o.a.createElement(U,null),isSelected:this.isSelected({isTrashRow:!0}),label:"Trash",onClick:this.onSelectTrash})),o.a.createElement("div",{className:"navigation-bar__tags theme-color-border"},o.a.createElement(fe,null)),o.a.createElement("div",{className:"navigation-bar__tools theme-color-border"},o.a.createElement("div",{className:"navigation-bar__footer"},o.a.createElement(C,null))),(!A.a||t)&&o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"navigation-bar__tools theme-color-border"},o.a.createElement(x,{icon:o.a.createElement(pe,null),label:"Settings",onClick:a})),o.a.createElement("div",{className:"navigation-bar__footer"},o.a.createElement("button",{type:"button",className:"navigation-bar__footer-item theme-color-fg-dim",onClick:this.props.showKeyboardShortcuts},"Keyboard Shortcuts")),o.a.createElement("div",{className:"navigation-bar__footer"},o.a.createElement("button",{type:"button",className:"navigation-bar__footer-item theme-color-fg-dim",onClick:this.onHelpClicked},"Help & Support"),o.a.createElement("button",{type:"button",className:"navigation-bar__footer-item theme-color-fg-dim",onClick:n},"About"))))}}])&&ge(t.prototype,n),a&&ge(t,a),c}(r.Component);Se(Ne,"displayName","NavigationBar");var Te={onAbout:function(){return m.a.ui.showDialog("ABOUT")},onOutsideClick:m.a.ui.toggleNavigation,onShowAllNotes:m.a.ui.showAllNotes,onSettings:function(){return m.a.ui.showDialog("SETTINGS")},selectTrash:m.a.ui.selectTrash,showKeyboardShortcuts:function(){return m.a.ui.showDialog("KEYBINDINGS")}},_e=Object(a.b)((function(e){var t=e.settings,n=e.ui,r=n.dialogs,o=n.openedTag,a=n.showNavigation,i=n.showTrash;return{autoHideMenuBar:t.autoHideMenuBar,isDialogOpen:r.length>0,openedTag:o,showNavigation:a,showTrash:i}}),Te)(Object(i.a)(Ne));function Ie(){return(Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function je(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ae=function(e){var t=e.icon,n=e.title,r=je(e,["icon","title"]);return o.a.createElement(R.a,{classes:{tooltip:"icon-button__tooltip"},enterDelay:200,title:n},o.a.createElement("button",Ie({className:"icon-button",type:"button","data-title":n},r),t))};Ae.propTypes={disableTooltip:P.a.bool,icon:P.a.element.isRequired,title:P.a.string.isRequired};var Re=Ae;function Ce(){return o.a.createElement("svg",{className:"icon-back",xmlns:"http://www.w3.org/2000/svg",width:"22px",height:"22px",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M19 10H6.414l5.293-5.293-1.414-1.414L2.586 11l7.707 7.707 1.414-1.414L6.414 12H19z"}))}function ke(){return o.a.createElement("svg",{className:"icon-info",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M11 4c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.14-7-7 3.14-7 7-7m0-2a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm1 8h-2v6h2v-6zm-1-4a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"}))}function Pe(){return o.a.createElement("svg",{className:"icon-preview",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M11,4C4.19,4,0,11,0,11s4.19,7,11,7,11-7,11-7S17.81,4,11,4Zm0,12c-4.13,0-7.22-3.29-8.56-5A14.22,14.22,0,0,1,7.39,6.84a4.5,4.5,0,1,0,7.23,0A14.44,14.44,0,0,1,19.56,11C18.23,12.73,15.16,16,11,16Z"}))}function Le(){return o.a.createElement("svg",{className:"icon-preview-stop",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M0,11S4.19,4,11,4a10.09,10.09,0,0,1,3.4.6L7.17,11.83a4.42,4.42,0,0,1,.22-5A14.22,14.22,0,0,0,2.44,11a16.27,16.27,0,0,0,2.77,2.79L3.78,15.22A18,18,0,0,1,0,11Zm22,0s-4.19,7-11,7a10.13,10.13,0,0,1-3.4-.6L4,21,2.5,19.5l3.06-3.06L7,15l1.64-1.64,6.16-6.16L15,7l1.48-1.48L19.5,2.5,21,4,18.22,6.78A18,18,0,0,1,22,11Zm-2.44,0a16.27,16.27,0,0,0-2.77-2.79L15.5,9.5A4.5,4.5,0,0,1,11,14L9.21,15.79A7.9,7.9,0,0,0,11,16C15.16,16,18.23,12.73,19.56,11Z"}))}function De(){return o.a.createElement("svg",{className:"icon-revisions",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M8.7,14.7l3.3-3.3V6h-2v4.6l-2.7,2.7L8.7,14.7z M11,2c5,0,9,4,9,9h-2c0-3.9-3.1-7-7-7s-7,3.1-7,7s3.1,7,7,7c2.4,0,4.5-1.2,5.7-3H13v-2h7v7h-2v-3.3c-1.6,2-4.2,3.3-7,3.3c-5,0-9-4-9-9S6,2,11,2z"}))}function Me(){return o.a.createElement("svg",{className:"icon-share",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M7.707 7.707L6.293 6.293 11 1.586l4.707 4.707-1.414 1.414L12 5.414V13h-2V5.414L7.707 7.707zM17 9v9H5V9H3v11h16V9h-2z"}))}function xe(){return o.a.createElement("svg",{className:"icon-sidebar",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M19,3H3C1.895,3,1,3.895,1,5v12c0,1.105,0.895,2,2,2h16c1.105,0,2-0.895,2-2V5C21,3.895,20.105,3,19,3z M3,5h3v12H3V5z M19,17H8V5h11V17z"}))}function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ke(e);if(t){var o=Ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ve(this,n)}}function Ve(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?ze(e):t}function ze(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(i,e);var t,n,r,a=Be(i);function i(){var e;He(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return We(ze(e=a.call.apply(a,[this].concat(n))),"renderNormal",(function(){var t=e.props,n=t.editMode,r=t.hasRevisions,a=t.markdownEnabled,i=t.note,c=t.toggleNoteInfo;return i?o.a.createElement("div",{className:"note-toolbar"},o.a.createElement("div",{className:"note-toolbar__column-left"},o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(Re,{icon:o.a.createElement(xe,null),onClick:e.props.toggleFocusMode,title:"Toggle Sidebar"}))),o.a.createElement("div",{className:"note-toolbar__column-right"},o.a.createElement("div",{className:"note-toolbar__button note-toolbar-back"},o.a.createElement(Re,{icon:o.a.createElement(Ce,null),onClick:e.props.toggleNoteList,title:"Back â€¢ Ctrl+Shift+L"})),a&&o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(Re,{icon:n?o.a.createElement(Pe,null):o.a.createElement(Le,null),onClick:e.props.toggleEditMode,title:"Preview â€¢ Ctrl+Shift+P"})),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(Re,{disabled:!r,icon:o.a.createElement(De,null),onClick:e.props.toggleRevisions,title:r?"History":"History (unavailable)"})),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(Re,{icon:o.a.createElement(Me,null),onClick:e.props.shareNote,title:"Share"})),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(Re,{icon:o.a.createElement(U,null),onClick:e.props.trashNote,title:"Trash"})),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement(Re,{icon:o.a.createElement(ke,null),onClick:c,title:"Info"})))):o.a.createElement("div",{className:"note-toolbar-placeholder theme-color-border"})})),We(ze(e),"renderTrashed",(function(){return o.a.createElement("div",{className:"note-toolbar-trashed"},o.a.createElement("div",{className:"note-toolbar__column-left"},o.a.createElement(Re,{icon:o.a.createElement(Ce,null),onClick:e.props.toggleNoteList,title:"Back â€¢ Ctrl+Shift+L"})),o.a.createElement("div",{className:"note-toolbar__column-right"},o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement("button",{type:"button",className:"button button-compact button-danger",onClick:e.props.deleteNoteForever},"Delete Forever")),o.a.createElement("div",{className:"note-toolbar__button"},o.a.createElement("button",{type:"button",className:"button button-primary button-compact",onClick:e.props.restoreNote},"Restore Note"))))})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props.note;return o.a.createElement("div",{className:"note-toolbar-wrapper theme-color-border"},(null==e?void 0:e.deleted)?this.renderTrashed():this.renderNormal())}}])&&Ue(t.prototype,n),r&&Ue(t,r),i}(r.Component);We(qe,"displayName","NoteToolbar");var $e={deleteNoteForever:m.a.ui.deleteOpenNoteForever,restoreNote:m.a.ui.restoreOpenNote,shareNote:function(){return m.a.ui.showDialog("SHARE")},toggleEditMode:m.a.ui.toggleEditMode,toggleFocusMode:m.a.settings.toggleFocusMode,toggleNoteInfo:m.a.ui.toggleNoteInfo,toggleNoteList:m.a.ui.toggleNoteList,toggleRevisions:m.a.ui.toggleRevisions,trashNote:m.a.ui.trashOpenNote},Ye=Object(a.b)((function(e){var t,n,r=e.data,o=e.ui,a=o.editMode,i=o.openedNote,c=(o.selectedRevision,i&&null!==(t=r.notes.get(i))&&void 0!==t?t:null);return{editMode:a,hasRevisions:!!(null===(n=r.noteRevisions.get(i))||void 0===n?void 0:n.size),markdownEnabled:(null==c?void 0:c.systemTags.includes("markdown"))||!1,note:c}}),$e)(qe),Qe=function(e){var t=e.disabled,n=e.min,r=e.max,a=e.value,i=e.onChange;return o.a.createElement("input",{className:"slider",disabled:t,type:"range",min:n,max:r,value:a,onChange:i})};function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e){return function(e){if(Array.isArray(e))return Xe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=it(e);if(t){var o=it(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ot(this,n)}}function ot(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?at(e):t}function at(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(i,e);var t,n,r,a=rt(i);function i(){var e;et(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ct(at(e=a.call.apply(a,[this].concat(n))),"handleClickOutside",(function(){return e.onCancelRevision()})),ct(at(e),"onAcceptRevision",(function(){var t=e.props,n=t.noteId,r=t.openedRevision;(0,t.restoreRevision)(n,r)})),ct(at(e),"onSelectRevision",(function(t){var n=t.target.value,r=e.props.revisions,o=parseInt(n,10),a=Je(r.keys())[o];e.props.openRevision(e.props.noteId,a)})),ct(at(e),"onCancelRevision",(function(){e.props.cancelRevision()})),e}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.isViewingRevisions,n=e.note,r=e.openedRevision,a=e.revisions;if(!t)return null;var i=a&&r?Je(a.keys()).indexOf(r):-1,c=r&&i===(null==a?void 0:a.size)-1,l=Object(u.a)(1e3*(r?a.get(r).modificationDate:n.modificationDate),"MMM d, yyyy h:mm a"),s=c?{opacity:"0.5",pointerEvents:"none"}:{},f=D()("revision-selector",{"is-visible":t});return o.a.createElement("div",{className:f},o.a.createElement("div",{className:"revision-date"},"Originally created: ".concat(l)),o.a.createElement("div",{className:"revision-slider"},o.a.createElement(Qe,{disabled:!a||0===a.size,min:1,max:(null==a?void 0:a.size)-1,value:i>-1?i:(null==a?void 0:a.size)-1,onChange:this.onSelectRevision})),o.a.createElement("div",{className:"revision-buttons"},o.a.createElement("button",{className:"button button-secondary button-compact",onClick:this.onCancelRevision},"Cancel"),o.a.createElement("button",{style:s,className:"button button-primary button-compact",onClick:this.onAcceptRevision},"Restore Note")))}}])&&tt(t.prototype,n),r&&tt(t,r),i}(r.Component),lt=Object(a.b)((function(e){var t,n,r,o,a;return{isViewingRevisions:e.ui.showRevisions,noteId:e.ui.openedNote,note:null!==(t=e.data.notes.get(e.ui.openedNote))&&void 0!==t?t:null,openedRevision:(null===(n=e.ui.openedRevision)||void 0===n?void 0:n[0])===e.ui.openedNote&&null!==(r=null===(o=e.ui.openedRevision)||void 0===o?void 0:o[1])&&void 0!==r?r:null,revisions:null!==(a=e.data.noteRevisions.get(e.ui.openedNote))&&void 0!==a?a:null}}),{openRevision:function(e,t){return{type:"OPEN_REVISION",noteId:e,version:t}},cancelRevision:function(){return{type:"CLOSE_REVISION"}},restoreRevision:function(e,t){return{type:"RESTORE_NOTE_REVISION",noteId:e,version:t}}})(Object(i.a)(ut));function st(){return o.a.createElement("svg",{className:"icon-new-note",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M19 10v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7v2H5v12h12v-7h2zm3-7h-3V0h-2v3h-3v2h3v3h2V5h3V3zm-7 5H7v2h8V8zm0 4H7v2h8v-2z"}))}function ft(){return o.a.createElement("svg",{className:"icon-cross-small",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M16.707 6.707l-1.414-1.414L11 9.586 6.707 5.293 5.293 6.707 9.586 11l-4.293 4.293 1.414 1.414L11 12.414l4.293 4.293 1.414-1.414L12.414 11z"}))}var dt=new Set,pt=function(){return function(e){return function(t){var n=e(t);switch(t.type){case"SEARCH":dt.forEach((function(e){return e()}));break;case"FOCUS_SEARCH_FIELD":dt.forEach((function(e){return e("select")}))}return n}}};function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ot(e);if(t){var o=Ot(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bt(this,n)}}function bt(e,t){return!t||"object"!==mt(t)&&"function"!=typeof t?Et(e):t}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var St=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(c,e);var t,n,a,i=vt(c);function c(){var e;ht(this,c);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return wt(Et(e=i.call.apply(i,[this].concat(n))),"inputField",Object(r.createRef)()),wt(Et(e),"blur",(function(){e.inputField.current&&e.inputField.current.blur()})),wt(Et(e),"focus",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"focus-only";e.inputField.current&&("select"===t&&e.inputField.current.select(),e.inputField.current.focus())})),wt(Et(e),"interceptEsc",(function(t){27===t.keyCode&&(""===e.props.searchQuery&&e.blur(),e.clearQuery())})),wt(Et(e),"update",(function(t){var n=t.currentTarget.value;e.props.onSearch(n)})),wt(Et(e),"clearQuery",(function(){return e.props.onSearch("")})),e}return t=c,(n=[{key:"componentDidMount",value:function(){var e;e=this.focus,dt.add(e)}},{key:"render",value:function(){var e,t=this.props,n=t.openedTag,r=t.searchQuery,a=t.showTrash,i=r.length>0,c=a?"Trash":null!==(e=null==n?void 0:n.name)&&void 0!==e?e:"All Notes",u="Search "+(n?"notes with tag ":"")+c;return o.a.createElement("div",{className:"search-field"},o.a.createElement("input",{"aria-label":u,ref:this.inputField,type:"search",placeholder:c,onChange:this.update,onKeyUp:this.interceptEsc,value:r,spellCheck:!1}),o.a.createElement("button",{"aria-label":"Clear search",hidden:!i,onClick:this.clearQuery},o.a.createElement(ft,null)))}}])&&yt(t.prototype,n),a&&yt(t,a),c}(r.Component);wt(St,"displayName","SearchField");var Nt=Object(a.b)((function(e){var t,n=e.data,r=e.ui,o=r.openedTag,a=r.searchQuery,i=r.showTrash;return{openedTag:o&&null!==(t=n.tags[0].get(o))&&void 0!==t?t:null,searchQuery:a,showTrash:i}}),(function(e){return{onSearch:function(t){e(Object($.search)(t)),j.a.tracks.recordEvent("list_notes_searched")}}}))(St);function Tt(){return o.a.createElement("svg",{className:"icon-menu",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},o.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M21,11H3v2H21Zm0-5H3V8H21Zm0,10H3v2H21Z"})))}var _t=n(252),It=function(e){var t=e.onNewNote,n=e.searchQuery,r=e.showTrash,a=e.toggleNavigation;return o.a.createElement("div",{className:"search-bar theme-color-border"},o.a.createElement(Re,{icon:o.a.createElement(Tt,null),onClick:a,title:"Menu â€¢ Ctrl+Shift+U"}),o.a.createElement(Nt,null),o.a.createElement(Re,{disabled:r,icon:o.a.createElement(st,null),onClick:function(){return t(Object(_t.b)(n))},title:"New Note â€¢ Ctrl+Shift+I"}))};It.displayName="SearchBar";var jt=Object(a.b)((function(e){var t=e.ui;return{searchQuery:t.searchQuery,showTrash:t.showTrash}}),(function(e){return{onNewNote:function(t){e(Object($.createNote)(t)),j.a.tracks.recordEvent("list_note_created")},toggleNavigation:function(){e(Object($.toggleNavigation)())}}}))(It),At=n(381),Rt=n(1322);function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pt=function(e){var t=e.children,n=e.delay,a=void 0===n?1e3:n,i=Ct(Object(r.useState)(!1),2),c=i[0],u=i[1];return Object(r.useEffect)((function(){var e=window.setTimeout((function(){u(!0)}),a);return function(){return window.clearTimeout(e)}}),[]),o.a.createElement(Rt.a,{classNames:"transition-delay-enter",in:c,mountOnEnter:!0,timeout:200,unmountOnExit:!0},t)},Lt=n(204);function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bt(e);if(t){var o=Bt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ut(this,n)}}function Ut(e,t){return!t||"object"!==Dt(t)&&"function"!=typeof t?Ft(e):t}function Ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zt=o.a.lazy((function(){return Promise.all([n.e(10),n.e(4)]).then(n.bind(null,1321))})),Kt=o.a.lazy((function(){return Promise.all([n.e(0),n.e(9),n.e(3)]).then(n.bind(null,1320))})),Wt=o.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,649))})),qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(c,e);var t,n,a,i=Ht(c);function c(){var e;Mt(this,c);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Vt(Ft(e=i.call.apply(i,[this].concat(n))),"openKeybindingsHelp",(function(t){if(e.props.keyboardShortcuts){var n=e.props,r=n.hideKeyboardShortcuts,o=n.keyboardShortcutsAreOpen,a=n.showKeyboardShortcuts,i=t.ctrlKey,c=t.code,u=t.metaKey;(i||u)&&"Slash"===c&&(o?r():a(),t.stopPropagation(),t.preventDefault())}})),Vt(Ft(e),"render",(function(){var t=e.props,n=t.showNoteList,a=t.hasRevisions,i=t.isFocusMode,c=void 0!==i&&i,u=t.isNavigationOpen,l=t.isNoteInfoOpen,s=t.isNoteOpen,f=t.isSmallScreen,d=t.openedNote,p=t.openedRevision,m=t.showRevisions,h=D()("app-layout",{"is-focus-mode":c,"is-navigation-open":u,"is-note-open":s,"is-showing-note-info":l}),y=!(n&&f),g=o.a.createElement(Pt,{delay:1e3},o.a.createElement("div",{className:"app-layout__placeholder"},o.a.createElement(At.a,null)));return o.a.createElement("div",{className:h},o.a.createElement(r.Suspense,{fallback:g},o.a.createElement("div",{className:"app-layout__source-column theme-color-bg theme-color-fg"},o.a.createElement(jt,null),o.a.createElement(zt,null)),y&&o.a.createElement("div",{className:"app-layout__note-column theme-color-bg theme-color-fg theme-color-border"},a&&o.a.createElement(lt,null),o.a.createElement(Ye,null),m?o.a.createElement(Wt,{noteId:d,note:p}):o.a.createElement(Kt,null))))})),e}return t=c,(n=[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.openKeybindingsHelp,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.openKeybindingsHelp,!1)}}])&&xt(t.prototype,n),a&&xt(t,a),c}(r.Component),$t={hideKeyboardShortcuts:function(){return m.a.ui.closeDialog("KEYBINDINGS")},showKeyboardShortcuts:function(){return m.a.ui.showDialog("KEYBINDINGS")}},Yt=Object(a.b)((function(e){var t,n,r,o;return{hasRevisions:e.ui.showRevisions&&e.data.noteRevisions.has(e.ui.openedNote),keyboardShortcutsAreOpen:e.ui.dialogs.includes("KEYBINDINGS"),keyboardShortcuts:e.settings.keyboardShortcuts,isFocusMode:e.settings.focusModeEnabled,isNavigationOpen:e.ui.showNavigation,isNoteInfoOpen:e.ui.showNoteInfo,isNoteOpen:!e.ui.showNoteList,isSmallScreen:Lt.b(e),openedRevision:(null===(t=e.ui.openedRevision)||void 0===t?void 0:t[0])===e.ui.openedNote&&null!==(n=null===(r=e.data.noteRevisions.get(e.ui.openedNote))||void 0===r?void 0:r.get(null===(o=e.ui.openedRevision)||void 0===o?void 0:o[1]))&&void 0!==n?n:null,openedNote:e.ui.openedNote,showNoteList:e.ui.showNoteList,showRevisions:e.ui.showRevisions}}),$t)(qt),Qt=function(){return o.a.createElement("div",{className:"dev-badge"},"DEV")},Zt=n(581),Jt=n.n(Zt),Xt=n(34);function en(){return o.a.createElement("svg",{className:"icon-arrow-top-right",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 22 22"},o.a.createElement("path",{d:"M6.075 17.364L15 8.464V16h2V5H6v2h7.536L4.65 15.925z"}))}function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function an(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=un(e);if(t){var o=un(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cn(this,n)}}function cn(e,t){return!t||"object"!==tn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ln,sn,fn,dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(i,e);var t,n,r,a=an(i);function i(){return nn(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.closeBtnLabel,r=void 0===n?"Done":n,a=e.hideTitleBar,i=e.title,c=e.children,u=e.onDone;return o.a.createElement("div",{className:D()(t,"dialog theme-color-bg theme-color-fg theme-color-border")},!a&&o.a.createElement("div",{className:"dialog-title-bar theme-color-border"},o.a.createElement("div",{className:"dialog-title-side"}),o.a.createElement("h2",{className:"dialog-title-text"},i),o.a.createElement("div",{className:"dialog-title-side"},!!u&&o.a.createElement("button",{type:"button","aria-label":"Close dialog",className:"button button-borderless",onClick:u},r))),o.a.createElement("div",{className:"dialog-content"},c))}}])&&rn(t.prototype,n),r&&rn(t,r),i}(r.Component);ln=dn,sn="propTypes",fn={children:P.a.node.isRequired,className:P.a.string,closeBtnLabel:P.a.string,hideTitleBar:P.a.bool,title:P.a.string,onDone:P.a.func},sn in ln?Object.defineProperty(ln,sn,{value:fn,enumerable:!0,configurable:!0,writable:!0}):ln[sn]=fn;var pn=dn;function mn(e){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gn(e,t){return(gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=En(e);if(t){var o=En(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bn(this,n)}}function bn(e,t){return!t||"object"!==mn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function En(e){return(En=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var On=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}(i,e);var t,n,r,a=vn(i);function i(){return hn(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.closeDialog,t=(new Date).getFullYear();return o.a.createElement("div",{className:"about"},o.a.createElement(pn,{hideTitleBar:!0,onDone:e,title:"About"},o.a.createElement("div",{className:"about-top"},o.a.createElement(Xt.a,null),o.a.createElement("h1",null,"Simplenote"),o.a.createElement("small",null,"Version ","1.19.0")),o.a.createElement("ul",{className:"about-links"},o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://simplenote.com/blog/",rel:"noopener noreferrer"},o.a.createElement("span",{className:"about-links-title"},"Blog"),o.a.createElement("br",null),"simplenote.com/blog/"),o.a.createElement(en,null)),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://twitter.com/simplenoteapp",rel:"noopener noreferrer"},o.a.createElement("span",{className:"about-links-title"},"Twitter"),o.a.createElement("br",null),"@simplenoteapp"),o.a.createElement(en,null)),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://github.com/Automattic/simplenote-electron",rel:"noopener noreferrer"},o.a.createElement("span",{className:"about-links-title"},"Contribute"),o.a.createElement("br",null),"GitHub.com"),o.a.createElement(en,null)),o.a.createElement("li",null,o.a.createElement("a",{target:"_blank",href:"https://automattic.com/work-with-us/",rel:"noopener noreferrer"},"Made with love by the folks at Automattic.",o.a.createElement("br",null),"Are you a developer? Weâ€™re hiring."),o.a.createElement(en,null))),o.a.createElement("div",{className:"about-bottom"},o.a.createElement("p",null,o.a.createElement("a",{target:"_blank",href:"https://simplenote.com/privacy/",rel:"noopener noreferrer"},"Privacy Policy")," ","Â â€¢Â "," ",o.a.createElement("a",{target:"_blank",href:"https://simplenote.com/terms/",rel:"noopener noreferrer"},"Terms of Service")),o.a.createElement("p",null,o.a.createElement("a",{target:"_blank",href:"https://automattic.com/",rel:"noopener noreferrer"},"Â© ",t," Automattic, Inc."))),o.a.createElement("button",{type:"button","aria-label":"Close dialog",className:"about-done button button-borderless",onClick:e},o.a.createElement(p,null))))}}])&&yn(t.prototype,n),r&&yn(t,r),i}(r.Component),wn={closeDialog:$.closeDialog},Sn=Object(a.b)(null,wn)(On),Nn=function(e){var t=e.items,n=e.onClickItem;return o.a.createElement("ul",{className:"button-group"},t.map((function(e){return o.a.createElement("li",{key:e.slug,className:"button-group__item theme-color-border"},o.a.createElement("button",{type:"button",onClick:function(){return n(e)}},e.name))})))};Nn.propTypes={items:P.a.array.isRequired,onClickItem:P.a.func.isRequired};var Tn=Nn,_n=[{name:"Evernote",slug:"evernote",acceptedTypes:".enex",electronOnly:!0,instructions:"Choose an Evernote export file (.enex)",optionsHint:"Images and other media will not be imported."},{name:"Simplenote",slug:"simplenote",acceptedTypes:".json",instructions:"Choose a Simplenote export file (.json)"},{name:"Plain text files",slug:"plaintext",acceptedTypes:".txt",instructions:"Choose one or more plain text files (.txt)",multiple:!0}],In=function(e){var t=e.selectSource;return o.a.createElement(r.Fragment,null,o.a.createElement(l.a,{headingLevel:"3"},"Import from"),o.a.createElement(Tn,{items:A.a?_n:Object(c.reject)(_n,(function(e){return e.electronOnly})),onClickItem:function(e){return t(e)}}))};In.propTypes={selectSource:P.a.func.isRequired};var jn=In,An=n(383),Rn=n(42);function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ln(e,t){return(Ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gn(e);if(t){var o=Gn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mn(this,n)}}function Mn(e,t){return!t||"object"!==Cn(t)&&"function"!=typeof t?xn(e):t}function xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Un=o.a.lazy((function(){return Promise.all([n.e(12),n.e(6)]).then(n.bind(null,1319))})),Fn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ln(e,t)}(c,e);var t,n,a,i=Dn(c);function c(){var e;kn(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Hn(xn(e=i.call.apply(i,[this].concat(n))),"state",{importStarted:!1,selectedSource:void 0}),e}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props.closeDialog,n=this.state,a=n.importStarted,i=n.selectedSource,c=Boolean(i),u=o.a.createElement(Pt,{delay:1e3},o.a.createElement("div",{className:"import__placeholder"},o.a.createElement(Rn.a,{size:60})));return o.a.createElement(pn,{className:"import",closeBtnLabel:a?"":"Cancel",onDone:a?void 0:t,title:"Import Notes"},o.a.createElement("div",{className:"import__inner"},!c&&o.a.createElement(jn,{locked:a,selectSource:function(t){return e.setState({selectedSource:t})}}),o.a.createElement(An.a,{wrapperClassName:"import__source-importer-wrapper",shouldMount:c},o.a.createElement(r.Suspense,{fallback:u},o.a.createElement(Un,{locked:a,onClose:t,onStart:function(){return e.setState({importStarted:!0})},source:i})))))}}])&&Pn(t.prototype,n),a&&Pn(t,a),c}(r.Component),Bn={closeDialog:$.closeDialog},Vn=Object(a.b)(null,Bn)(Fn);function zn(e){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qn(e,t){return(qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qn(e);if(t){var o=Qn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yn(this,n)}}function Yn(e,t){return!t||"object"!==zn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qn(e){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Zn=function(e){var t=e.keys,n=e.children;return o.a.createElement("div",{className:"keybindings__key-item"},o.a.createElement("div",{className:"keybindings__key-list"},t.map((function(e,t){return o.a.createElement(r.Fragment,{key:t},t>0&&" + ","string"==typeof e?o.a.createElement("kbd",{key:e},e):o.a.createElement(o.a.Fragment,null,o.a.createElement("kbd",null,e[0])," / ",o.a.createElement("kbd",null,e[1])))}))),"â€€-â€€",o.a.createElement("div",{className:"keybindings__key-description"},n))},Jn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qn(e,t)}(i,e);var t,n,r,a=$n(i);function i(){return Kn(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.closeDialog,t=A.b?"Cmd":"Ctrl";return o.a.createElement("div",{className:"keybindings"},o.a.createElement(pn,{onDone:e,title:"Keyboard Shortcuts"},o.a.createElement("div",{className:"keybindings__sections"},o.a.createElement("section",null,o.a.createElement("h1",null,"View"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"/"]},"Show keyboard shortcuts")),o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"Shift","F"]},"Toggle focus mode")),o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"Shift","S"]},"Focus search field")),o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"G"]},"Jump to next match in note")),o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"Shift","G"]},"Jump to previous match in note")),A.a&&o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"+"]},"Increase font size")),A.a&&o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"-"]},"Decrease font size")),A.a&&o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"0"]},"Reset font size")))),o.a.createElement("section",null,o.a.createElement("h1",null,"Navigation"),o.a.createElement("ul",null,A.a&&o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,","]},"Open app preferences")),A.a&&o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"Shift","E"]},"Export all notes")),o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"Shift","U"]},"Toggle tag list")),o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"Shift","K"]},"Open note above current one")),o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"Shift","J"]},"Open note below current one")),o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"Shift","Y"]},"Toggle editing content/tags")),o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"Shift","L"]},"Toggle note list (on narrow screens)")))),o.a.createElement("section",null,o.a.createElement("h1",null,"Note Editing"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"Shift","I"]},"Create new note")),A.a&&o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"P"]},"Print note")),o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"Shift","P"]},"Toggle Markdown preview")),o.a.createElement("li",null,o.a.createElement(Zn,{keys:[t,"Shift","C"]},"Insert checklist item")))))))}}])&&Wn(t.prototype,n),r&&Wn(t,r),i}(r.Component),Xn={closeDialog:$.closeDialog},er=Object(a.b)(null,Xn)(Jn),tr=n(1300);function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ar(e,t){return(ar=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ur(e);if(t){var o=ur(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cr(this,n)}}function cr(e,t){return!t||"object"!==nr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ur(e){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ar(e,t)}(i,e);var t,n,r,a=ir(i);function i(){return rr(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.tabNames;return o.a.createElement(tr.d,{selectedTabClassName:"is-active"},o.a.createElement(tr.b,{className:"tab-panels__tab-list theme-color-border"},n.map((function(e,t){return o.a.createElement(tr.a,{className:"button button-borderless",key:t},e)}))),o.a.createElement("div",{className:"tab-panels__panel"},t.map((function(e,t){return o.a.createElement(tr.c,{key:t},o.a.createElement("div",{className:"tab-panels__column"},e))}))))}}])&&or(t.prototype,n),r&&or(t,r),i}(r.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(lr,"propTypes",{children:P.a.node.isRequired,className:P.a.string,tabNames:P.a.arrayOf(P.a.string).isRequired});var sr=lr,fr=function(){return null},dr=function(e){var t=e.title,n=e.slug,r=e.activeSlug,a=e.description,i=e.onChange,c=e.learnMoreURL,u=e.renderer,s=e.children,f=o.a.createElement("a",{href:c,onClick:function(e){e.preventDefault(),Object(me.a)(c)}},"Learn more"),d=o.a.Children.toArray(s).filter((function(e){return e}));return o.a.createElement("div",{className:"settings-group"},o.a.createElement(l.a,{headingLevel:3},t),o.a.createElement("div",{className:"settings-items theme-color-border"},d.map((function(e){var a=e.props,c=a.slug,l=a.title;return o.a.createElement("label",{className:"settings-item theme-color-border",htmlFor:"settings-field-".concat(n,"-").concat(c),key:c},o.a.createElement("div",{className:"settings-item-label"},l),o.a.createElement("div",{className:"settings-item-control"},u({activeSlug:r,groupTitle:t,groupSlug:n,slug:c,title:l,isEnabled:c===r,onChange:i})))}))),a&&o.a.createElement("p",null,a," ",c&&f))};dr.propTypes={activeSlug:P.a.string,children:P.a.node,description:P.a.string,learnMoreURL:P.a.string,onChange:P.a.func,renderer:P.a.func,slug:P.a.string,title:P.a.string};var pr=dr,mr=function(e){var t=e.groupSlug,n=e.slug,r=e.isEnabled,a=e.onChange;return o.a.createElement(d,{name:t,value:n,id:"settings-field-".concat(t,"-").concat(n),checked:r,onChange:a})},hr={logout:m.a.ui.logout,toggleAnalytics:m.a.data.toggleAnalytics},yr=Object(a.b)((function(e){return{accountName:e.settings.accountName,analyticsEnabled:e.data.analyticsAllowed}}),hr)((function(e){var t=e.accountName,n=e.analyticsEnabled,r=e.logout,a=e.toggleAnalytics;return o.a.createElement("div",{className:"settings-account"},o.a.createElement(l.a,{headingLevel:3},"Account"),o.a.createElement("div",{className:"settings-items theme-color-border"},o.a.createElement("div",{className:"settings-item theme-color-border"},o.a.createElement("span",{className:"settings-account-name"},t))),o.a.createElement("ul",{className:"dialog-actions"},o.a.createElement("li",null,o.a.createElement("button",{type:"button",className:"button button-borderless",onClick:function(){Object(me.a)("https://app.simplenote.com/settings/?from=react")}},"Edit Account ",o.a.createElement(en,null))),o.a.createElement("li",null,o.a.createElement(pr,{title:"Privacy",slug:"shareAnalytics",activeSlug:n?"enabled":"",description:"Help us improve Simplenote by sharing usage data with our analytics tool.",onChange:a,learnMoreURL:"https://automattic.com/cookies",renderer:mr},o.a.createElement(fr,{title:"Share analytics",slug:"enabled"}))),o.a.createElement("li",null,o.a.createElement("button",{type:"button",className:"button button-primary",onClick:r},"Log Out"))))}));function gr(){return(gr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vr(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var br=function(e){var t=e.className,n=vr(e,["className"]);return o.a.createElement("span",{className:D()("checkbox-control",t)},o.a.createElement("input",gr({type:"checkbox"},n)),o.a.createElement("span",{className:"checkbox-control-base"},o.a.createElement("span",{className:"checkbox-control-checked"})))},Er=function(e){var t=e.groupSlug,n=e.slug,r=e.isEnabled,a=e.onChange;return o.a.createElement(br,{type:"radio",name:t,value:n,id:"settings-field-".concat(t,"-").concat(n),checked:r,onChange:function(){return a(n)}})};Er.propTypes={groupSlug:P.a.string,slug:P.a.string,isEnabled:P.a.bool.isRequired,onChange:P.a.func.isRequired};var Or=Er,wr={setActiveTheme:m.a.settings.activateTheme,setLineLength:m.a.settings.setLineLength,setNoteDisplay:m.a.settings.setNoteDisplay,setSortType:m.a.settings.setSortType,toggleAutoHideMenuBar:m.a.settings.toggleAutoHideMenuBar,toggleSortOrder:m.a.settings.toggleSortOrder,toggleSortTagsAlpha:m.a.settings.toggleSortTagsAlpha},Sr=Object(a.b)((function(e){var t=e.settings;return{activeTheme:t.theme,autoHideMenuBar:t.autoHideMenuBar,lineLength:t.lineLength,noteDisplay:t.noteDisplay,sortIsReversed:t.sortReversed,sortTagsAlpha:t.sortTagsAlpha,sortType:t.sortType}}),wr)((function(e){return o.a.createElement(r.Fragment,null,o.a.createElement(pr,{title:"Note display",slug:"noteDisplay",activeSlug:e.noteDisplay,onChange:e.setNoteDisplay,renderer:Or},o.a.createElement(fr,{title:"Comfy",slug:"comfy"}),o.a.createElement(fr,{title:"Condensed",slug:"condensed"}),o.a.createElement(fr,{title:"Expanded",slug:"expanded"})),o.a.createElement(pr,{title:"Line length",slug:"lineLength",activeSlug:e.lineLength,onChange:e.setLineLength,renderer:Or},o.a.createElement(fr,{title:"Narrow",slug:"narrow"}),o.a.createElement(fr,{title:"Full",slug:"full"})),o.a.createElement(pr,{title:"Sort type",slug:"sortType",activeSlug:e.sortType,onChange:e.setSortType,renderer:Or},o.a.createElement(fr,{title:"Date modified",slug:"modificationDate"}),o.a.createElement(fr,{title:"Date created",slug:"creationDate"}),o.a.createElement(fr,{title:"Alphabetical",slug:"alphabetical"})),o.a.createElement(pr,{title:"Sort order",slug:"sortOrder",activeSlug:e.sortIsReversed?"reversed":"",onChange:e.toggleSortOrder,renderer:mr},o.a.createElement(fr,{title:"Reversed",slug:"reversed"})),o.a.createElement(pr,{title:"Tags",slug:"sortTagsAlpha",activeSlug:e.sortTagsAlpha?"alpha":"",onChange:e.toggleSortTagsAlpha,renderer:mr},o.a.createElement(fr,{title:"Sort Alphabetically",slug:"alpha"})),o.a.createElement(pr,{title:"Theme",slug:"theme",activeSlug:e.activeTheme,onChange:e.setActiveTheme,renderer:Or},-1===navigator.userAgent.toLowerCase().indexOf(" electron/")&&o.a.createElement(fr,{title:"System",slug:"system"}),o.a.createElement(fr,{title:"Light",slug:"light"}),o.a.createElement(fr,{title:"Dark",slug:"dark"})),A.a&&!A.b&&o.a.createElement(pr,{title:"Menu Bar",slug:"autoHideMenuBar",activeSlug:e.autoHideMenuBar?"autoHide":"",description:"When set to auto-hide, press the Alt key to toggle.",onChange:e.toggleAutoHideMenuBar,renderer:mr},o.a.createElement(fr,{title:"Hide Automatically",slug:"autoHide"})))})),Nr=Object(a.b)((function(e){return{keyboardShortcuts:e.settings.keyboardShortcuts}}),(function(e){return{exportNotes:function(){return e(m.a.data.exportNotes())},showImportDialog:function(){return e(Object($.showDialog)("IMPORT"))},toggleShortcuts:function(){return e(m.a.settings.toggleKeyboardShortcuts())}}}))((function(e){var t=e.exportNotes,n=e.keyboardShortcuts,a=e.showImportDialog,i=e.toggleShortcuts;return o.a.createElement(r.Fragment,null,o.a.createElement("div",{className:"settings-tools"},o.a.createElement(l.a,{headingLevel:3},"Tools"),o.a.createElement(Tn,{items:[{name:"Import Notes",slug:"import"},{name:"Export Notes",slug:"export"}],onClickItem:function(e){"import"===e.slug?a():"export"===e.slug&&t()}})),o.a.createElement(pr,{slug:"keyboardShortcuts",activeSlug:n?"keyboardShortcuts":"",onChange:i,renderer:mr},o.a.createElement(fr,{title:"Keyboard Shortcuts",slug:"keyboardShortcuts"})))})),Tr=["account","display","tools"],_r=Object(a.b)(null,{closeDialog:$.closeDialog})((function(e){var t=e.closeDialog;return o.a.createElement(pn,{className:"settings",title:"Settings",onDone:t},o.a.createElement(sr,{tabNames:Tr},o.a.createElement(yr,null),o.a.createElement(Sr,null),o.a.createElement(Nr,null)))})),Ir=n(867),jr=n.n(Ir),Ar=n(878),Rr=n.n(Ar);function Cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pr(e){var t=e.text,n=Object(r.useRef)(),a=Object(r.useRef)(),i=Object(r.useRef)(),c=function(){s(!0)},u=Cr(Object(r.useState)(!1),2),l=u[0],s=u[1];return Object(r.useEffect)((function(){if(l){var e=setTimeout((function(){return s(!1)}),4e3);return function(){return clearTimeout(e)}}}),[l]),Object(r.useEffect)((function(){a.current=function(){return t},i.current=c}),[t,c]),Object(r.useEffect)((function(){var e=new Rr.a(n.current,{text:function(){return a.current()}});return e.on("success",(function(){return i.current()})),function(){return e.destroy()}}),[]),o.a.createElement("button",{ref:n,type:"button",className:"button button-borderless"},l?"Copied!":"Copy")}Pr.propTypes={disbaled:P.a.bool,text:P.a.string};var Lr=Pr,Dr=n(387);function Mr(e){return(Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xr(e){return function(e){if(Array.isArray(e))return Gr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fr(e,t){return(Fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kr(e);if(t){var o=Kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vr(this,n)}}function Vr(e,t){return!t||"object"!==Mr(t)&&"function"!=typeof t?zr(e):t}function zr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kr(e){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qr=["collaborate","publish"],$r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fr(e,t)}(i,e);var t,n,r,a=Br(i);function i(){var e;Hr(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Wr(zr(e=a.call.apply(a,[this].concat(n))),"onTogglePublished",(function(t){e.props.publishNote(e.props.noteId,t)})),Wr(zr(e),"getPublishURL",(function(e){return Object(c.isEmpty)(e)?void 0:"http://simp.ly/p/".concat(e)})),Wr(zr(e),"onAddCollaborator",(function(t){var n=e.props,r=n.note,o=n.noteId,a=(null==r?void 0:r.tags)||[],i=e.collaboratorElement.value.trim();t.preventDefault(),e.collaboratorElement.value="";var c=e.props.settings.accountName===i;""===i||-1!==a.indexOf(i)||c||(e.props.editNote(o,{tags:[].concat(xr(a),[i])}),j.a.tracks.recordEvent("editor_note_collaborator_added"))})),Wr(zr(e),"onRemoveCollaborator",(function(t){var n=e.props,r=n.note,o=n.noteId,a=(null==r?void 0:r.tags)||[];a=a.filter((function(e){return e!==t})),e.props.editNote(o,{tags:a}),j.a.tracks.recordEvent("editor_note_collaborator_removed")})),Wr(zr(e),"collaborators",(function(){var t=e.props.note,n=((null==t?void 0:t.tags)||[]).filter(Dr.a);return n.reverse(),n})),Wr(zr(e),"gravatarURL",(function(e){var t=(new jr.a).update(e.trim().toLowerCase()).digest("hex").toLowerCase();return"https://secure.gravatar.com/avatar/".concat(t,".jpg?s=68")})),e}return t=i,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.closeDialog,r=t.note||{},a=Object(c.includes)(r.systemTags,"published"),i=this.getPublishURL(r.publishURL);return o.a.createElement(pn,{className:"settings",title:"Share",onDone:n},o.a.createElement(sr,{tabNames:qr},o.a.createElement("div",null,o.a.createElement("div",{className:"settings-group"},o.a.createElement("p",null,"Add an email address of another Simplenote user to share a note. You'll both be able to edit and view the note."),o.a.createElement("div",{className:"settings-items theme-color-border"},o.a.createElement("form",{className:"settings-item theme-color-border",onSubmit:this.onAddCollaborator},o.a.createElement("input",{className:"settings-item-text-input transparent-input",pattern:"^[^@]+@.+",placeholder:"email@example.com",ref:function(t){return e.collaboratorElement=t},spellCheck:!1,title:"Please enter a valid email"}),o.a.createElement("div",{className:"settings-item-control"},o.a.createElement("button",{type:"submit",className:"button button-borderless"},"Add Email"))))),o.a.createElement("div",{className:"settings-group"},o.a.createElement("div",{className:"share-collaborators-heading theme-color-border"},o.a.createElement(l.a,{headingLevel:3},"Collaborators")),o.a.createElement("ul",{className:"share-collaborators"},this.collaborators().map((function(t){return o.a.createElement("li",{key:t,className:"share-collaborator"},o.a.createElement("span",{className:"share-collaborator-photo"},o.a.createElement("img",{src:e.gravatarURL(t),width:"34",height:"34"})),o.a.createElement("span",{className:"share-collaborator-name"},t),o.a.createElement("button",{className:"share-collaborator-remove button button-borderless button-danger",onClick:e.onRemoveCollaborator.bind(e,t)},"Remove"))}))))),o.a.createElement("div",null,o.a.createElement("div",{className:"settings-group"},o.a.createElement("div",{className:"settings-items theme-color-border"},o.a.createElement("label",{htmlFor:"settings-field-public",className:"settings-item theme-color-border"},o.a.createElement("div",{className:"settings-item-label"},"Make public link"),o.a.createElement("div",{className:"settings-item-control"},o.a.createElement(d,{id:"settings-field-public",onChange:this.onTogglePublished,checked:a})))),o.a.createElement("p",null,"Ready to share your note with the world? Anyone with the public link will be able to view the latest version.")),a&&o.a.createElement("div",{className:"settings-group"},o.a.createElement(l.a,{headingLevel:3},"Public link"),o.a.createElement("div",{className:"settings-items theme-color-border"},o.a.createElement("div",{className:"settings-item theme-color-border"},o.a.createElement("input",{ref:function(t){return e.publishUrlElement=t},className:"settings-item-text-input transparent-input",placeholder:a?"Publishing noteâ€¦":"Note not published",value:i,spellCheck:!1}),o.a.createElement("div",{className:"settings-item-control"},i&&o.a.createElement(Lr,{text:i})))),i&&o.a.createElement("p",null,"Note published!")))))}}])&&Ur(t.prototype,n),r&&Ur(t,r),i}(r.Component),Yr={closeDialog:m.a.ui.closeDialog,editNote:m.a.data.editNote,publishNote:m.a.data.publishNote},Qr=Object(a.b)((function(e){var t=e.data,n=e.settings,r=e.ui.openedNote;return{settings:n,noteId:r,note:t.notes.get(r)}}),Yr)($r);function Zr(e){return(Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eo(e,t){return(eo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function to(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ro(e);if(t){var o=ro(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return no(this,n)}}function no(e,t){return!t||"object"!==Zr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ro(e){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eo(e,t)}(c,e);var t,n,a,i=to(c);function c(){return Jr(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.theme,n=e.closeDialog;return o.a.createElement(r.Fragment,null,this.props.dialogs.map((function(e){return o.a.createElement(Jt.a,{key:e,className:"dialog-renderer__content",contentLabel:e,isOpen:!0,onRequestClose:n,overlayClassName:"dialog-renderer__overlay",portalClassName:"dialog-renderer__portal theme-".concat(t)},"ABOUT"===e?o.a.createElement(Sn,{key:"about"}):"IMPORT"===e?o.a.createElement(Vn,{key:"import"}):"KEYBINDINGS"===e?o.a.createElement(er,{key:"keybindings"}):"SETTINGS"===e?o.a.createElement(_r,{key:"settings"}):"SHARE"===e?o.a.createElement(Qr,{key:"share"}):null)})))}}])&&Xr(t.prototype,n),a&&Xr(t,a),c}(r.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(oo,"displayName","DialogRenderer");var ao={closeDialog:$.closeDialog},io=Object(a.b)((function(e){return{dialogs:e.ui.dialogs,theme:Object(Lt.a)(e)}}),ao)(oo),co=n(579);function uo(e){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function so(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fo(e,t){return(fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function po(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yo(e);if(t){var o=yo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mo(this,n)}}function mo(e,t){return!t||"object"!==uo(t)&&"function"!=typeof t?ho(e):t}function ho(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function go(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fo(e,t)}(i,e);var t,n,r,a=po(i);function i(){var e;lo(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return go(ho(e=a.call.apply(a,[this].concat(n))),"handleShortcut",(function(t){if(e.props.hotkeysEnabled){var n=t.code,r=t.ctrlKey,o=t.metaKey,a=t.shiftKey,i=(r||o)&&r!==o;return i&&a&&"KeyU"===n&&!e.props.showNavigation?(e.props.openTagList(),t.stopPropagation(),t.preventDefault(),!1):i&&a&&"KeyS"===n||A.a&&i&&!a&&"KeyF"===n?(e.props.focusSearchField(),t.stopPropagation(),t.preventDefault(),!1):i&&a&&"KeyF"===n?(e.props.toggleFocusMode(),t.stopPropagation(),t.preventDefault(),!1):i&&a&&"KeyI"===n?(e.props.createNote(),t.stopPropagation(),t.preventDefault(),!1):(i&&"KeyG"===n&&(t.stopPropagation(),t.preventDefault()),!0)}})),go(ho(e),"toggleShortcuts",(function(t){t?window.addEventListener("keydown",e.handleShortcut,!0):window.removeEventListener("keydown",e.handleShortcut,!0)})),e}return t=i,(n=[{key:"componentDidMount",value:function(){var e;null===(e=window.electron)||void 0===e||e.send("setAutoHideMenuBar",this.props.autoHideMenuBar),this.toggleShortcuts(!0)}},{key:"componentWillUnmount",value:function(){this.toggleShortcuts(!1)}},{key:"render",value:function(){var e=this.props,t=e.isDevConfig,n=e.isOffline,r=e.lineLength,a=e.showNavigation,i=e.showNoteInfo,c=e.theme,u=D()("app","theme-".concat(c),{"is-line-length-full":"full"===r,"touch-enabled":"ontouchstart"in document.body}),l=D()("simplenote-app",{"note-info-open":i,"navigation-open":a,"is-electron":A.a,"is-macos":A.b});return o.a.createElement("div",{className:u},t&&o.a.createElement(Qt,null),n&&o.a.createElement("div",{className:"dev-badge"},"OFFLINE"),o.a.createElement("div",{className:l},a&&o.a.createElement(_e,null),o.a.createElement(Yt,null),i&&o.a.createElement(I,null)),o.a.createElement(io,{appProps:this.props}))}}])&&so(t.prototype,n),r&&so(t,r),i}(r.Component);go(vo,"displayName","App");var bo=Object(a.b)((function(e){return{autoHideMenuBar:e.settings.autoHideMenuBar,hotkeysEnabled:e.settings.keyboardShortcuts,isOffline:"offline"===e.simperium.connectionStatus,isSmallScreen:Lt.b(e),lineLength:e.settings.lineLength,showNavigation:e.ui.showNavigation,showNoteInfo:e.ui.showNoteInfo,theme:Lt.a(e)}}),(function(e){return{activateTheme:function(t){return e(co.activateTheme(t))},closeNote:function(){return e(Object($.closeNote)())},createNote:function(){return e(Object($.createNote)())},focusSearchField:function(){return e(m.a.ui.focusSearchField())},openTagList:function(){return e(Object($.toggleNavigation)())},setAccountName:function(t){return e(co.setAccountName(t))},setLineLength:function(t){return e(co.setLineLength(t))},setNoteDisplay:function(t){return e(co.setNoteDisplay(t))},setSortType:function(t){return e(co.setSortType(t))},toggleAutoHideMenuBar:function(){return e(co.toggleAutoHideMenuBar())},toggleFocusMode:function(){return e(co.toggleFocusMode())},toggleSortOrder:function(){return e(co.toggleSortOrder())},toggleSortTagsAlpha:function(){return e(co.toggleSortTagsAlpha())},toggleSpellCheck:function(){return e(co.toggleSpellCheck())}}}))(vo),Eo=n(5),Oo=n.n(Eo),wo=n(234),So=n(879),No=n.n(So);function To(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?To(Object(n),!0).forEach((function(t){Io(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):To(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||Ro(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ao(e){return function(e){if(Array.isArray(e))return Co(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ro(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ro(e,t){if(e){if("string"==typeof e)return Co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Co(e,t):void 0}}function Co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ko(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Po(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ko(a,r,o,i,c,"next",e)}function c(e){ko(a,r,o,i,c,"throw",e)}i(void 0)}))}}var Lo=function(){return new Promise((function(e,t){var n=indexedDB.open("simplenote",2020065);n.onsuccess=function(){return e(n.result)},n.onerror=function(){return t()},n.onupgradeneeded=function(){var e=n.result;e.objectStoreNames.contains("state")||e.createObjectStore("state"),e.objectStoreNames.contains("revisions")||e.createObjectStore("revisions")}}))},Do=function(){var e=Po(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lo();case 3:t=e.sent,e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",[{},null]);case 9:return e.abrupt("return",new Promise((function(e){var n=t.transaction(["state","revisions"],"readonly"),r=n.objectStore("state").get("state");r.onsuccess=function(){var t=r.result;try{var o=new Map(t.tags),a={data:{notes:new Map(t.notes),tags:[o,new Map(Ao(o.entries()).map((function(e){var t=jo(e,2),n=t[0];return[t[1].name.toLocaleLowerCase(),n]})))]},simperium:{ghosts:[new Map(t.cvs),new Map(t.ghosts)],lastRemoteUpdate:new Map(t.lastRemoteUpdate),lastSync:new Map(t.lastSync)},ui:{editorSelection:new Map(t.editorSelection)}},i=n.objectStore("revisions").openCursor(),c=new Map;i.onsuccess=function(){var t=i.result;t?(c.set(t.key,new Map(t.value)),t.continue()):e([_o(_o({},a),{},{data:_o(_o({},a.data),{},{noteRevisions:c})}),Go])},i.onerror=function(){return e([a,Go])}}catch(t){e([{},Go])}},r.onerror=function(){return e([{},Go])}})));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),Mo=function(){var e=Po(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lo();case 2:r=e.sent.transaction("revisions","readwrite"),(o=r.objectStore("revisions").get(t)).onsuccess=function(){var e,a=o.result,i=null!==(e=null==a?void 0:a.slice())&&void 0!==e?e:[],c=new Set(i.map((function(e){return jo(e,1)[0]})));n.forEach((function(e){var t=jo(e,2),n=t[0],r=t[1];c.has(n)||(i.push([n,r]),c.add(n))})),i.sort((function(e,t){return e[0]-t[0]})),r.objectStore("revisions").put(i,t)},o.onerror=function(){r.objectStore("revisions").put(n,t)};case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xo=function(){var e=Po(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,c,u,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(t.ui.editorSelection),r=Array.from(t.data.notes),o=Array.from(t.data.tags[0]),a=Array.from(t.simperium.ghosts[0]),i=Array.from(t.simperium.ghosts[1]),c=Array.from(t.simperium.lastRemoteUpdate),u=Array.from(t.simperium.lastRemoteUpdate),l={editorSelection:n,notes:r,tags:o,cvs:a,ghosts:i,lastRemoteUpdate:c,lastSync:u},e.next=10,Lo();case 10:s=e.sent.transaction("state","readwrite"),s.objectStore("state").put(l,"state");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Go=function(e){e.dispatch;var t=e.getState;return function(e){var n=null;return function(r){var o=e(r);return n&&clearTimeout(n),n=setTimeout((function(){return xo(t())}),100),"LOAD_REVISIONS"===r.type&&r.revisions.length>0&&Mo(r.noteId,r.revisions),o}}},Ho=n(28),Uo=n(884),Fo=n.n(Uo);function Bo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zo=/(?!\r)\n/g,Ko=function(e){var t=[],n=[];return e.forEach((function(e,r){var o=Bo(Object(c.partition)(Object(c.sortBy)(e.tags,(function(e){return e.toLocaleLowerCase()})),Dr.a),2),a=o[0],i=o[1],u=Object.assign({id:r,content:e.content.replace(zo,"\r\n"),creationDate:new Date(1e3*e.creationDate).toISOString(),lastModified:new Date(1e3*e.modificationDate).toISOString()},e.systemTags.includes("pinned")&&{pinned:!0},e.systemTags.includes("markdown")&&{markdown:!0},i.length&&{tags:i},e.systemTags.includes("published")&&(null==e?void 0:e.publishURL)&&{publicURL:"http://simp.ly/p/".concat(e.publishURL)},e.systemTags.includes("shared")&&a.length&&{collaboratorEmails:a});e.deleted?n.push(u):t.push(u)})),Promise.resolve({activeNotes:t,trashedNotes:n})},Wo=n(885),qo=n.n(Wo);function $o(e){return function(e){if(Array.isArray(e))return Zo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Qo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||Qo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qo(e,t){if(e){if("string"==typeof e)return Zo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zo(e,t):void 0}}function Zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(n),!0).forEach((function(t){ea(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ta=function(e){return Xo(Xo({},e),{},{fileName:e.content.split("\n").map((function(e){return e.trim()})).map(qo.a).filter(c.identity).concat("untitled").shift().slice(0,40)})},na=function(e){if(!e.tags)return e;var t=e.tags.reduce((function(e,t){var n=Yo(e,2),r=n[0],o=n[1];return o.length+t.length>75?[[].concat($o(r),[o]),t]:[r,"".concat(o,", ").concat(t)]}),[[],""]).reduce((function(e,t){return[].concat($o(e),[t])})).map((function(e){return e.replace(/^, /,"")}));return Xo(Xo({},e),{},{content:"".concat(e.content,"\n\nTags:\n  ").concat(t.join("\n  "))})},ra=function(e,t){var n=Yo(e,2),r=n[0],o=n[1],a=Object(c.update)(o,t.fileName,(function(e){return e||0===e?e+1:0})),i=a[t.fileName],u=i>0?"".concat(t.fileName," (").concat(i,")"):t.fileName;return[[].concat($o(r),[Xo(Xo({},t),{},{fileName:u})]),a]},oa=function(e){return n.e(8).then(n.t.bind(null,1313,7)).then((function(t){var n=new(0,t.default);return n.file("source/notes.json",JSON.stringify(e,null,2).replace(zo,"\r\n")),e.activeNotes.map(na).map(ta).reduce(ra,[[],{}]).shift().forEach((function(e){var t=e.content,r=e.fileName,o=e.lastModified;n.file("".concat(r,".txt"),t,{date:new Date(o)})})),e.trashedNotes.map(na).map(ta).reduce(ra,[[],{}]).shift().forEach((function(e){var t=e.content,r=e.fileName,o=e.lastModified;n.file("trash/".concat(r,".txt"),t,{date:new Date(o)})})),n})).catch(console.log)},aa=function(e){return Ko(e).then(oa).then((function(e){return e.generateAsync({compression:"DEFLATE",platform:Object(c.get)(window,"process.platform","DOS"),type:"blob"})})).then((function(e){return Fo()(e,"notes.zip")})).catch(console.log)};function ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(n),!0).forEach((function(t){ua(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ua(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var la=function(e){return function(t){return function(n){var r=e.getState();switch(n.type){case"CREATE_NOTE":var o=Object(Ho.v4)();return t({type:"CREATE_NOTE_WITH_ID",noteId:o,note:n.note,meta:{nextNoteToOpen:o}});case"DELETE_OPEN_NOTE_FOREVER":if(!r.ui.openedNote)return;return t({type:"DELETE_NOTE_FOREVER",noteId:r.ui.openedNote});case"EXPORT_NOTES":return aa(r.data.notes),t(n);case"IMPORT_NOTE":return t({type:"IMPORT_NOTE_WITH_ID",noteId:Object(Ho.v4)(),note:n.note});case"INSERT_TASK":var a;return r.ui.openedNote?t({type:"INSERT_TASK_INTO_NOTE",noteId:r.ui.openedNote,selection:null!==(a=r.ui.editorSelection.get(r.ui.openedNote))&&void 0!==a?a:[0,0,"LTR"]}):void 0;case"RESTORE_NOTE_REVISION":var i=r.data.noteRevisions.get(n.noteId).get(n.version);return t(i?ca(ca({},n),{},{note:i}):n);case"RESTORE_OPEN_NOTE":if(!r.ui.openedNote)return;return t({type:"RESTORE_NOTE",noteId:r.ui.openedNote});case"TOGGLE_ANALYTICS":return t({type:"SET_ANALYTICS",allowAnalytics:null!==r.data.analyticsAllowed&&!r.data.analyticsAllowed});case"TRASH_OPEN_NOTE":if(!r.ui.openedNote)return;return t({type:"TRASH_NOTE",noteId:r.ui.openedNote});default:return t(n)}}}},sa=function(e){var t=e.dispatch,n=e.getState;return window.electron.receive("appCommand",(function(e){switch(e.action){case"exportNotes":return void t(m.a.data.exportNotes());case"printNote":return void window.print();case"activateTheme":return void t(m.a.settings.activateTheme(e.theme));case"focusSearchField":return void t(m.a.ui.focusSearchField());case"insertChecklist":return void t({type:"INSERT_TASK"});case"showDialog":return void t(m.a.ui.showDialog(e.dialog));case"trashNote":return void t(m.a.ui.trashOpenNote());case"newNote":return void t(m.a.ui.createNote());case"increaseFontSize":return void t(m.a.settings.increaseFontSize());case"decreaseFontSize":return void t(m.a.settings.decreaseFontSize());case"resetFontSize":return void t(m.a.settings.resetFontSize());case"setLineLength":return void t(m.a.settings.setLineLength(e.lineLength));case"setNoteDisplay":return void t(m.a.settings.setNoteDisplay(e.noteDisplay));case"setSortType":return void t(m.a.settings.setSortType(e.sortType));case"toggleFocusMode":return void t(m.a.settings.toggleFocusMode());case"toggleSortOrder":return void t(m.a.settings.toggleSortOrder());case"toggleSortTagsAlpha":return void t(m.a.settings.toggleSortTagsAlpha());case"toggleSpellCheck":return void t(m.a.settings.toggleSpellCheck());default:console.log(e)}})),window.electron.send("settingsUpdate",n().settings),function(e){return function(t){var r=n(),o=e(t),a=n();return r.settings!==a.settings&&window.electron.send("settingsUpdate",a.settings),o}}},fa=n(591);function da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?da(Object(n),!0).forEach((function(t){ma(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):da(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ma(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ha(e){return function(e){if(Array.isArray(e))return va(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ga(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ya(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||ga(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ga(e,t){if(e){if("string"==typeof e)return va(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?va(e,t):void 0}}function va(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ba=[],Ea=function(e){var t,n,r,o,a,i,c,u,l,s;return{content:null!==(t=null===(n=e.content)||void 0===n?void 0:n.toLocaleLowerCase())&&void 0!==t?t:"",casedContent:null!==(r=e.content)&&void 0!==r?r:"",tags:new Set(null!==(o=null===(a=e.tags)||void 0===a?void 0:a.map((function(e){return e.toLocaleLowerCase()})))&&void 0!==o?o:[]),creationDate:null!==(i=e.creationDate)&&void 0!==i?i:Date.now()/1e3,modificationDate:null!==(c=e.modificationDate)&&void 0!==c?c:Date.now()/1e3,isPinned:null!==(u=null===(l=e.systemTags)||void 0===l?void 0:l.includes("pinned"))&&void 0!==u&&u,isTrashed:null!==(s=!!e.deleted)&&void 0!==s&&s}},Oa=function(e){var t={hasSelectedFirstNote:!1,notes:new Map,openedTag:null,searchQuery:"",searchTags:new Set,searchTerms:[],showTrash:!1,sortType:e.getState().settings.sortType,sortReversed:e.getState().settings.sortReversed},n=[],r=[],o=[],a=function(e){var a=function(e){return function(n,r){var o=t.notes.get(n),a=t.notes.get(r);if(!o||!a)return n.localeCompare(r);if(o.isPinned!==a.isPinned)return o.isPinned?-1:1;var i=e(o,a);return 0!==i?i:n.localeCompare(r)}},i=a((function(e,t){return e.casedContent.localeCompare(t.casedContent)})),c=a((function(e,t){return t.creationDate-e.creationDate})),u=a((function(e,t){return t.modificationDate-e.modificationDate}));[[n,i],[r,c],[o,u]].forEach((function(t){var n=ya(t,2),r=n[0],o=n[1],a=r.indexOf(e);a>-1&&r.splice(a,1);var i=function e(t,n,r,o,a){if(o>=a)return o;var i=Math.floor((o+a)/2),c=r(n,t[i]);return c<0?e(t,n,r,o,i):c>0?e(t,n,r,i+1,a):i}(r,e,o,0,r.length);r.splice(i,0,e)}))},i=function(e){[n,r,o].forEach((function(t){var n=t.indexOf(e);n>-1&&t.splice(n,1)}))};window.indexAlphabetical=n,window.indexCreationDate=r,window.indexModification=o,window.searchState=t;var c=function(){for(var e=t.notes,a=t.openedTag,i=t.searchTags,c=t.searchTerms,u=t.sortReversed,l=t.sortType,s=t.showTrash,f=new Set,d=new Set,p="alphabetical"===l?n:"creationDate"===l?r:o,m=function(t){var n=p[u?p.length-t-1:t],r=e.get(n);if(s!==r.isTrashed)return"continue";var o,l=!0,m=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=ga(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(i.values());try{for(m.s();!(o=m.n()).done;){var h=o.value;if(!r.tags.has(h)){l=!1;break}}}catch(e){m.e(e)}finally{m.f()}return l?a&&!r.tags.has(a)||c.length>0&&!c.every((function(e){return r.content.includes(e)}))?"continue":void(r.isPinned?d.add(n):f.add(n)):"continue"},h=0;h<p.length;h++)m(h);return[].concat(ha(d.values()),ha(f.values()))},u=function(n){var r=e.getState().data,o=t.searchQuery,a=Object(fa.b)(r.tags[0],o);return{noteIds:n,tagIds:a.length>0?a:ba}},l=function(e){return pa(pa({},e),{},{meta:pa(pa({},e.meta),{},{searchResults:u(c())})})},s=function(t){var n,r,o,a=e.getState().ui,i=a.filteredNotes,c=a.openedNote;if(!c)return t;var u=i.findIndex((function(e){return e===c})),l=-1===u?null!==(n=i[0])&&void 0!==n?n:null:null!==(r=null!==(o=i[u+1])&&void 0!==o?o:i[u-1])&&void 0!==r?r:null;return pa(pa({},t),{},{meta:pa(pa({},t.meta),{},{nextNoteToOpen:l})})},f=null,d=function(){clearTimeout(f),f=setTimeout((function(){var t=u(c());e.dispatch(pa(pa({type:"FILTER_NOTES"},t),{},{meta:{searchResults:t}}))}),30)};return e.getState().data.notes.forEach((function(e,n){t.notes.set(n,Ea(e)),a(n)})),d(),function(n){return function(r){var o,c=e.getState(),u=function(e){var r,o,a;return!t.hasSelectedFirstNote&&(null===(r=e.meta)||void 0===r||null===(o=r.searchResults)||void 0===o?void 0:o.noteIds.length)>0?(t.hasSelectedFirstNote=!0,n(pa(pa({},e),{},{meta:pa(pa({},e.meta),{},{nextNoteToOpen:null===(a=e.meta)||void 0===a?void 0:a.searchResults.noteIds[0]})}))):n(e)};switch(r.type){case"CONFIRM_NEW_NOTE":return t.notes.delete(r.originalNoteId),t.notes.set(r.newNoteId,Ea(r.note)),i(r.originalNoteId),a(r.newNoteId),u(l(r));case"CREATE_NOTE_WITH_ID":case"IMPORT_NOTE_WITH_ID":case"REMOTE_NOTE_UPDATE":return t.notes.set(r.noteId,Ea(null!==(o=r.note)&&void 0!==o?o:{})),a(r.noteId),d(),u(r);case"DELETE_NOTE_FOREVER":case"REMOTE_NOTE_DELETE_FOREVER":return t.notes.delete(r.noteId),i(r.noteId),u(s(l(r)));case"EDIT_NOTE":var f=t.notes.get(r.noteId);return void 0!==r.changes.content&&(f.content=r.changes.content.toLocaleLowerCase(),f.casedContent=r.changes.content),void 0!==r.changes.tags&&(f.tags=new Set(r.changes.tags.map((function(e){return e.toLocaleLowerCase()})))),void 0!==r.changes.creationDate&&(f.creationDate=1e3*r.changes.creationDate),void 0!==r.changes.modificationDate&&(f.modificationDate=1e3*r.changes.modificationDate),void 0!==r.changes.deleted&&(f.isTrashed=!!r.changes.deleted),void 0!==r.changes.systemTags&&(f.isPinned=r.changes.systemTags.includes("pinned")),a(r.noteId),u(l(r));case"OPEN_TAG":return t.openedTag=c.data.tags[0].get(r.tagId).name,u(l(r));case"PIN_NOTE":return t.notes.get(r.noteId).isPinned=r.shouldPin,a(r.noteId),u(l(r));case"RESTORE_NOTE":if(!t.notes.has(r.noteId))return;return t.notes.get(r.noteId).isTrashed=!1,a(r.noteId),u(s(l(r)));case"SELECT_TRASH":return t.openedTag=null,t.showTrash=!0,u(l(r));case"SHOW_ALL_NOTES":return t.openedTag=null,t.showTrash=!1,u(l(r));case"SEARCH":return t.searchQuery=r.searchQuery,t.searchTerms=Object(_t.a)(r.searchQuery),t.searchTags=function(e){for(var t,n=/(?:\btag:)([^\s,]+)/g,r=new Set;null!==(t=n.exec(e));)r.add(t[1].toLocaleLowerCase());return r}(r.searchQuery),u(l(r));case"setSortReversed":return t.sortReversed=r.sortReversed,u(l(r));case"setSortType":return t.sortType=r.sortType,u(l(r));case"TOGGLE_SORT_ORDER":return t.sortReversed=!t.sortReversed,u(l(r));case"TRASH_NOTE":if(!t.notes.has(r.noteId))return;return t.notes.get(r.noteId).isTrashed=!0,u(s(l(r)))}return u(r)}}};function wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wa(Object(n),!0).forEach((function(t){Na(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Na(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ta=function(e){return function(t){return function(n){var r,o;switch(n.type){case"SELECT_NOTE_ABOVE":var a=e.getState().ui,i=a.filteredNotes,c=a.openedNote;if(0===i.length)return;if(!c)return t({type:"SELECT_NOTE",noteId:i[0]});var u=i.findIndex((function(e){return e===c}));if(0===u)return;return t({type:"SELECT_NOTE",noteId:-1===u?i[0]:i[u-1]});case"SELECT_NOTE_BELOW":var l=e.getState().ui,s=l.filteredNotes,f=l.openedNote;if(0===s.length)return;if(!f)return t({type:"SELECT_NOTE",noteId:s[0]});var d=s.findIndex((function(e){return e===f}));if(d===s.length-1)return;return t({type:"SELECT_NOTE",noteId:-1===d?s[0]:s[d+1]});case"SHOW_ALL_NOTES":return t(Sa(Sa({},n),{},{meta:Sa(Sa({},n.meta),{},{nextNoteToOpen:null===(r=n.meta)||void 0===r||null===(o=r.searchResults)||void 0===o?void 0:o.noteIds[0]})}));default:return t(n)}}}},_a=function(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"},Ia=function(){return window.innerWidth},ja=Object(wo.c)({windowWidth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia(),t=arguments.length>1?arguments[1]:void 0;return"WINDOW_RESIZE"===t.type?t.innerWidth:e},systemTheme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_a(),t=arguments.length>1?arguments[1]:void 0;return"SYSTEM_THEME_UPDATE"===t.type?t.prefers:e}}),Aa=function(e){var t=e.dispatch;return window.addEventListener("resize",(function(){return t({type:"WINDOW_RESIZE",innerWidth:Ia()})})),window.matchMedia("(prefers-color-scheme: dark)").addListener((function(){return t({type:"SYSTEM_THEME_UPDATE",prefers:_a()})})),function(e){return e}};function Ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||ka(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ca(e){return function(e){if(Array.isArray(e))return Pa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ka(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ka(e,t){if(e){if("string"==typeof e)return Pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pa(e,t):void 0}}function Pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?La(Object(n),!0).forEach((function(t){Ma(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ma(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xa=Object(wo.c)({analyticsAllowed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ANALYTICS":return t.allowAnalytics;default:return e}},notes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NOTE_TAG":var n=e.get(t.noteId);return n?new Map(e).set(t.noteId,Da(Da({},n),{},{tags:[].concat(Ca(n.tags),[t.tagName])})):e;case"CREATE_NOTE_WITH_ID":return new Map(e).set(t.noteId,Da({content:"",creationDate:Date.now()/1e3,modificationDate:Date.now()/1e3,deleted:!1,publishURL:"",shareURL:"",systemTags:[],tags:[]},t.note));case"CONFIRM_NEW_NOTE":var r=new Map(e).set(t.newNoteId,t.note);return r.delete(t.originalNoteId),r;case"DELETE_NOTE_FOREVER":case"NOTE_BUCKET_REMOVE":case"REMOTE_NOTE_DELETE_FOREVER":if(!e.has(t.noteId))return e;var o=new Map(e);return o.delete(t.noteId),o;case"EDIT_NOTE":case"NOTE_BUCKET_UPDATE":case"REMOTE_NOTE_UPDATE":var a,i=null!==(a=e.get(t.noteId))&&void 0!==a?a:{content:"",creationDate:Date.now()/1e3,modificationDate:Date.now()/1e3,deleted:!1,publishURL:"",shareURL:"",systemTags:[],tags:[]};return new Map(e).set(t.noteId,Da(Da({},i),"EDIT_NOTE"===t.type?t.changes:t.note));case"RESTORE_NOTE_REVISION":return t.note?new Map(e).set(t.noteId,t.note):e;case"IMPORT_NOTE_WITH_ID":return new Map(e).set(t.noteId,t.note);case"INSERT_TASK_INTO_NOTE":var c=e.get(t.noteId);if(!c)return e;var u=Math.min(t.selection[0],t.selection[1]),l="\n"===c.content[u]?u-1:u,s=c.content.lastIndexOf("\n",l)+1;return/^(\s*- \[ |x] )/i.test(c.content.slice(s))?new Map(e).set(t.noteId,Da(Da({},c),{},{content:c.content.slice(0,s)+c.content.slice(s).replace(/^(\s*- \[(?: |x)\] )/i,"")})):new Map(e).set(t.noteId,Da(Da({},c),{},{content:c.content.slice(0,s)+" - [ ] "+c.content.slice(s)}));case"MARKDOWN_NOTE":if(!e.has(t.noteId))return e;var f=e.get(t.noteId),d=f.systemTags.includes("markdown");if(d===t.shouldEnableMarkdown)return e;var p=t.shouldEnableMarkdown?[].concat(Ca(f.systemTags),["markdown"]):f.systemTags.filter((function(e){return"markdown"!==e}));return new Map(e).set(t.noteId,Da(Da({},f),{},{systemTags:p}));case"PIN_NOTE":if(!e.has(t.noteId))return e;var m=e.get(t.noteId),h=m.systemTags.includes("pinned");if(h===t.shouldPin)return e;var y=t.shouldPin?[].concat(Ca(m.systemTags),["pinned"]):m.systemTags.filter((function(e){return"pinned"!==e}));return new Map(e).set(t.noteId,Da(Da({},m),{},{systemTags:y}));case"PUBLISH_NOTE":if(!e.has(t.noteId))return e;var g=e.get(t.noteId),v=g.systemTags.includes("published");if(v===t.shouldPublish)return e;var b=t.shouldPublish?[].concat(Ca(g.systemTags),["published"]):g.systemTags.filter((function(e){return"published"!==e}));return new Map(e).set(t.noteId,Da(Da({},g),{},{systemTags:b}));case"REMOVE_NOTE_TAG":var E=e.get(t.noteId);return E?new Map(e).set(t.noteId,Da(Da({},E),{},{tags:E.tags.filter((function(e){return e!==t.tagName}))})):e;case"RESTORE_NOTE":return e.has(t.noteId)?new Map(e).set(t.noteId,Da(Da({},e.get(t.noteId)),{},{deleted:!1})):e;case"TRASH_NOTE":return e.has(t.noteId)?new Map(e).set(t.noteId,Da(Da({},e.get(t.noteId)),{},{deleted:!0})):e;default:return e}},noteRevisions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_REVISIONS":var n,r=null!==(n=e.get(t.noteId))&&void 0!==n?n:new Map,o=new Map(r);return t.revisions.forEach((function(e){var t=Ra(e,2),n=t[0],r=t[1];return o.set(n,r)})),new Map(e).set(t.noteId,o);default:return e}},tags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Map,new Map],t=arguments.length>1?arguments[1]:void 0,n=Ra(e,2),r=n[0],o=n[1];switch(t.type){case"ADD_NOTE_TAG":if(o.has(t.tagName.toLocaleLowerCase()))return e;var a=Object(Ho.v4)(),i=new Map(r).set(a,{name:t.tagName}),c=new Map(o).set(t.tagName.toLocaleLowerCase(),a);return[i,c];case"CONFIRM_NEW_TAG":var u=new Map(r).set(t.newTagId,t.tag),l=new Map(o);return u.delete(t.originalTagId),l.delete(t.tagName),l.set(t.tag.name.toLocaleLowerCase(),t.newTagId),[u,l];case"EDIT_NOTE":var s;if(!(null===(s=t.changes.tags)||void 0===s?void 0:s.some((function(e){return!o.has(e.toLocaleLowerCase())}))))return e;var f=new Map(r),d=new Map(o);return t.changes.tags.forEach((function(e){if(!d.has(e)){var t=Object(Ho.v4)();f.set(t,{name:e}),d.set(e.toLocaleLowerCase(),t)}})),[f,d];case"IMPORT_NOTE_WITH_ID":var p;if(!(null===(p=t.note.tags)||void 0===p?void 0:p.some((function(e){return!o.has(e.toLocaleLowerCase())}))))return e;var m=new Map(r),h=new Map(o);return t.note.tags.forEach((function(e){if(!h.has(e)){var t=Object(Ho.v4)();m.set(t,{name:e}),h.set(e.toLocaleLowerCase(),t)}})),[m,h];case"REMOTE_TAG_DELETE":case"TAG_BUCKET_REMOVE":if(!r.has(t.tagId))return e;var y=new Map(r);y.delete(t.tagId);var g=new Map(o);return g.delete(r.get(t.tagId).name.toLocaleLowerCase()),[y,g];case"REMOTE_TAG_UPDATE":case"TAG_BUCKET_UPDATE":if(r.has(t.tagId)){var v=new Map(r);v.set(t.tagId,t.tag);var b=new Map(o);return b.delete(r.get(t.tagId).name.toLocaleLowerCase()),b.set(t.tag.name.toLocaleLowerCase(),t.tagId),[v,b]}return[new Map(r).set(t.tagId,t.tag),new Map(o).set(t.tag.name.toLocaleLowerCase(),t.tagId)];case"RENAME_TAG":var E=o.get(t.oldTagName.toLocaleLowerCase());if(!E)return e;var O=r.get(E);if(!O)return e;var w=new Map(r).set(E,Da(Da({},O),{},{name:t.newTagName})),S=new Map(o);return S.delete(t.oldTagName),S.set(t.newTagName.toLocaleLowerCase(),E),[w,S];case"REORDER_TAG":var N=o.get(t.tagName.toLocaleLowerCase());if(!N)return e;var T=r.get(N);if(!T)return e;var _=new Map(r);return _.delete(N),Ca(_.entries()).sort((function(e,t){return void 0!==e[1].index&&void 0!==t[1].index?e[1].index-t[1].index:void 0===e[1].index?1:-1})).forEach((function(e,n){var r=Ra(e,2),o=r[0],a=r[1];_.set(o,Da(Da({},a),{},{index:n<t.newIndex?n:n+1}))})),_.set(N,Da(Da({},T),{},{index:t.newIndex})),[_,o];case"TRASH_TAG":var I=new Map(r),j=new Map(o),A=o.get(t.tagName.toLocaleLowerCase());return A?(I.delete(A),j.delete(t.tagName.toLocaleLowerCase()),[I,j]):e;default:return e}}}),Ga=[10,14,16,20,24,34],Ha=Object(wo.c)({accountName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setAccountName":return t.accountName;default:return e}},autoHideMenuBar:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setAutoHideMenuBar":return t.autoHideMenuBar;case"TOGGLE_AUTO_HIDE_MENU_BAR":return!e;default:return e}},focusModeEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setFocusMode":return t.focusModeEnabled;case"TOGGLE_FOCUS_MODE":return!e;default:return e}},fontSize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DECREASE_FONT_SIZE":return Ga[Math.max(0,Ga.indexOf(e)-1)];case"INCREASE_FONT_SIZE":return Ga[Math.min(Ga.length-1,Ga.indexOf(e)+1)];case"RESET_FONT_SIZE":return 16;default:return e}},keyboardShortcuts:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"KEYBOARD_SHORTCUTS_TOGGLE":return!e;default:return e}},lineLength:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"narrow",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setLineLength":return t.lineLength;default:return e}},markdownEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SYSTEM_TAG":return"markdown"===t.tagName?t.shouldHaveTag:e;default:return e}},noteDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"comfy",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNoteDisplay":return t.noteDisplay;default:return e}},sortReversed:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSortReversed":return t.sortReversed;case"TOGGLE_SORT_ORDER":return!e;default:return e}},sortTagsAlpha:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSortTagsAlpha":return t.sortTagsAlpha;case"TOGGLE_SORT_TAGS_ALPHA":return!e;default:return e}},sortType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"modificationDate",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSortType":return t.sortType;default:return e}},spellCheckEnabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setSpellCheck":return t.spellCheckEnabled;case"TOGGLE_SPELLCHECK":return!e;default:return e}},theme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"system",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setTheme":return t.theme;default:return e}}});function Ua(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fa(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ba=new Map,Va=Object(wo.c)({connectionStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.onLine?"red":"offline",t=arguments.length>1?arguments[1]:void 0;return"CHANGE_CONNECTION_STATUS"===t.type?t.status:e},ghosts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Map,new Map],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GHOST_REMOVE_ENTITY":var n,r=Ua(e,2),o=r[0],a=r[1],i=null!==(n=a.get(t.bucketName))&&void 0!==n?n:new Map,c=new Map(i);return c.delete(t.entityId),[o,new Map(a).set(t.bucketName,c)];case"GHOST_SET_CHANGE_VERSION":var u=Ua(e,2),l=u[0],s=u[1],f=new Map(l).set(t.bucketName,t.version);return[f,s];case"GHOST_SET_ENTITY":var d,p=Ua(e,2),m=p[0],h=p[1],y=null!==(d=h.get(t.bucketName))&&void 0!==d?d:new Map,g=new Map(y).set(t.entityId,t.ghost);return[m,new Map(h).set(t.bucketName,g)];default:return e}},lastSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ACKNOWLEDGE_PENDING_CHANGE":return new Map(e).set(t.entityId,Date.now());case"REMOTE_NOTE_UPDATE":return t.remoteInfo?new Map(e).set(t.noteId,Date.now()):e;default:return e}},lastRemoteUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ba,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOTE_NOTE_UPDATE":return t.remoteInfo?new Map(e).set(t.noteId,Date.now()):e;default:return e}}});function za(e){return function(e){if(Array.isArray(e))return qa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Wa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ka(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||Wa(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wa(e,t){if(e){if("string"==typeof e)return qa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qa(e,t):void 0}}function qa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $a=[],Ya=function(e){return e.replace(/^(\s*)- \[ \](\s)/gm,"$1î€€$2").replace(/^(\s*)- \[x\](\s)/gim,"$1î€$2")},Qa=function(e){return e.replace(/\ue000/g,"- [ ]").replace(/\ue001/g,"- [x]")},Za=Object(wo.c)({editorSelection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONFIRM_NEW_NOTE":var n=e.get(t.originalNoteId);if(!n)return e;var r=new Map(e).set(t.newNoteId,n);return r.delete(t.originalNoteId),r;case"REMOTE_NOTE_UPDATE":var o,a,i;if("d"!==(null===(o=t.remoteInfo)||void 0===o||null===(a=o.patch)||void 0===a||null===(i=a.content)||void 0===i?void 0:i.o)||!e.has(t.noteId))return e;var c=e.get(t.noteId),u=Ka(c,3),l=u[0],s=u[1],f=u[2],d=t.remoteInfo.patch.content.v.split("\t"),p=t.remoteInfo.original.content,m=Qa(Ya(p).slice(0,l)).length,h=Qa(Ya(p).slice(0,s)).length,y=d.reduce((function(e,t){var n=Ka(e,3),r=n[0],o=n[1],a=n[2];if(a>r&&a>o)return e;var i=t[0],c=t.slice(1);switch(i){case"=":return[r,o,a+parseInt(c,10)];case"-":var u=parseInt(c,10);return[r>a?r-u:r,o>a?o-u:o,a];case"+":var l=decodeURIComponent(c).length;return[r>a?r+l:r,o>a?o+l:o,a];default:return e}}),[m,h,0]),g=Ka(y,2),v=g[0],b=g[1],E=Ya(t.note.content.slice(0,v)).length,O=Ya(t.note.content.slice(0,b)).length;return new Map(e).set(t.noteId,[E,O,f]);case"STORE_EDITOR_SELECTION":return new Map(e).set(t.noteId,[t.start,t.end,t.direction]);default:return e}},dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLOSE_DIALOG":return e.slice(0,-1);case"SHOW_DIALOG":return e.includes(t.dialog)?e:[].concat(za(e),[t.dialog]);default:return e}},editMode:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_EDIT_MODE":return!e;case"CREATE_NOTE":return!0;default:return e}},editingTags:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TAG_EDITING_TOGGLE":return!e;case"OPEN_NOTE":case"SELECT_NOTE":case"OPEN_TAG":case"SELECT_TRASH":case"SHOW_ALL_NOTES":case"NAVIGATION_TOGGLE":return!1;default:return e}},filteredNotes:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,n=arguments.length>1?arguments[1]:void 0;return void 0===(null===(e=n.meta)||void 0===e?void 0:e.searchResults)?t:n.meta.searchResults.noteIds},hasLoadedNotes:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILTER_NOTES":return t.noteIds.length>0||e;default:return e}},openedNote:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"CLOSE_NOTE":return null;case"CONFIRM_NEW_NOTE":return n===r.originalNoteId?r.newNoteId:n;case"OPEN_NOTE":return null!==(e=null==r?void 0:r.noteId)&&void 0!==e?e:n;case"SELECT_NOTE":return r.noteId;default:return void 0!==(null===(t=r.meta)||void 0===t?void 0:t.nextNoteToOpen)?r.meta.nextNoteToOpen:n}},openedRevision:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLOSE_REVISION":case"RESTORE_NOTE_REVISION":return null;case"OPEN_REVISION":return[t.noteId,t.version];default:return e}},openedTag:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TRASH":case"SHOW_ALL_NOTES":return null;case"OPEN_TAG":return t.tagId;default:return e}},searchQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_NOTE":return"";case"SEARCH":return t.searchQuery;default:return e}},showNavigation:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NAVIGATION_TOGGLE":return!e;case"OPEN_TAG":case"SELECT_TRASH":case"SHOW_ALL_NOTES":return!1;case"SHOW_DIALOG":return"SETTINGS"!==t.dialog&&e;default:return e}},showNoteInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTE_INFO_TOGGLE":return!e;case"NAVIGATION_TOGGLE":return!1;default:return e}},showNoteList:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTE_LIST_TOGGLE":return!e;case"OPEN_NOTE":return!1;default:return e}},showRevisions:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REVISIONS_TOGGLE":return!e;case"CLOSE_REVISION":case"OPEN_NOTE":case"SELECT_NOTE":case"CREATE_NOTE":case"RESTORE_NOTE_REVISION":return!1;default:return e}},showTrash:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_TRASH":return!0;case"CREATE_NOTE":case"OPEN_TAG":case"SHOW_ALL_NOTES":return!1;default:return e}},simperiumConnected:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return"SIMPERIUM_CONNECTION_STATUS_TOGGLE"===t.type?t.simperiumConnected:e},tagSuggestions:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,n=arguments.length>1?arguments[1]:void 0;return void 0===(null===(e=n.meta)||void 0===e?void 0:e.searchResults)?t:n.meta.searchResults.tagIds},unsyncedNoteIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$a,t=arguments.length>1?arguments[1]:void 0;return"SET_UNSYNCED_NOTE_IDS"===t.type?t.noteIds:e}});function Ja(e){return function(e){if(Array.isArray(e))return ni(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ti(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||ti(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ti(e,t){if(e){if("string"==typeof e)return ni(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ni(e,t):void 0}}function ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ri=Object(wo.c)({browser:ja,data:xa,settings:Ha,simperium:Va,ui:Za}),oi=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||wo.d,ai=n(6),ii=n(36),ci=n.n(ii),ui=n(51),li=n.n(ui);function si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||fi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fi(e,t){if(e){if("string"==typeof e)return di(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?di(e,t):void 0}}function di(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hi=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mi(this,"log",void 0),mi(this,"nextDeadline",Date.now()+1e3),mi(this,"bucket",void 0),mi(this,"queue",void 0),mi(this,"runTimer",null),this.bucket=t,this.log=li()("bucket-queue:".concat(t.name)),this.queue=new Map,t.on("index",(function(){return n.schedule()})),window.addEventListener("online",(function(){return n.schedule()})),this.schedule()}var t,n,r;return t=e,(n=[{key:"add",value:function(e,t){var n,r=null!==(n=this.queue.get(e))&&void 0!==n?n:1/0,o=Math.min(t,r);this.nextDeadline=Math.min(this.nextDeadline,o),this.log('added "'.concat(e,'" with deadline ').concat(new Date(o))),this.queue.set(e,o),this.schedule()}},{key:"has",value:function(e){return this.queue.has(e)}},{key:"run",value:function(){this.process(),this.schedule()}},{key:"schedule",value:function(){var e=this;this.runTimer&&clearTimeout(this.runTimer),this.runTimer=setTimeout((function(){return e.run()}),this.bucket.isIndexing||!navigator.onLine?1e4:this.nextDeadline-Date.now())}},{key:"process",value:function(){var e=this;if(this.bucket.isIndexing)this.log("skipping processing run because bucket is indexing");else if(navigator.onLine){var t=this.getNextNote();null!==t&&(this.log("telling bucket to sync ".concat(t)),this.queue.delete(t),this.bucket.touch(t).then((function(){return e.log("sync'd ".concat(t))})))}else this.log("skipping processing run because browser is offline")}},{key:"getNextNote",value:function(){var e,t=Date.now(),n=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=fi(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(this.queue);try{for(n.s();!(e=n.n()).done;){var r=si(e.value,2),o=r[0];if(r[1]<=t)return o}}catch(e){n.e(e)}finally{n.f()}return null}}])&&pi(t.prototype,n),r&&pi(t,r),e}();function yi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||vi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gi(e){return function(e){if(Array.isArray(e))return bi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||vi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vi(e,t){if(e){if("string"==typeof e)return bi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bi(e,t):void 0}}function bi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Oi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"entities",void 0),this.entities=new Map}var t,n,r;return t=e,(n=[{key:"get",value:function(e,t){t(null,{id:e,data:this.entities.get(e)})}},{key:"find",value:function(e,t){t(null,gi(this.entities).map((function(e){var t=yi(e,2);return{id:t[0],data:t[1]}})))}},{key:"remove",value:function(e,t){this.entities.delete(e),t(null)}},{key:"update",value:function(e,t,n,r){this.entities.set(e,t),r(null,{id:e,data:t,isIndexing:n})}}])&&Ei(t.prototype,n),r&&Ei(t,r),e}();function wi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||Ni(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Si(e){return function(e){if(Array.isArray(e))return Ti(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ni(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ni(e,t){if(e){if("string"==typeof e)return Ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ti(e,t):void 0}}function Ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ii=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"store",void 0),this.store=t}var t,n,r;return t=e,(n=[{key:"get",value:function(e,t){t(null,{id:e,data:this.store.getState().data.notes.get(e)})}},{key:"find",value:function(e,t){t(null,Si(this.store.getState().data.notes.entries()).map((function(e){var t=wi(e,2);return{id:t[0],data:t[1]}})))}},{key:"remove",value:function(e,t){this.store.dispatch({type:"NOTE_BUCKET_REMOVE",noteId:e}),t(null)}},{key:"update",value:function(e,t,n,r){this.store.dispatch({type:"NOTE_BUCKET_UPDATE",noteId:e,note:t,isIndexing:n}),r(null,{id:e,data:t})}}])&&_i(t.prototype,n),r&&_i(t,r),e}();function ji(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Ai(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ai(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}function Ai(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ki=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ci(this,"log",void 0),Ci(this,"notes",void 0),Ci(this,"queue",void 0),Ci(this,"store",void 0),this.log=li()("note-doctor"),this.notes=new Set,this.queue=n,this.store=t,setTimeout((function(){r.refreshNoteList(),r.schedule()}),1e3)}var t,n,r;return t=e,(n=[{key:"schedule",value:function(){var e=this;this.requestIdleCallback((function(t){e.checkNotes(t),e.notes.size>0?e.schedule():setTimeout((function(){e.refreshNoteList(),e.schedule()}),1e4)}))}},{key:"checkNotes",value:function(e){this.log("checking ".concat(this.notes.size," notes"));var t,n=ji(this.notes);try{for(n.s();!(t=n.n()).done;){var r,o,a=t.value,i=this.store.getState(),c=i.data.notes.get(a),u=null===(r=i.simperium.ghosts[1].get("note"))||void 0===r||null===(o=r.get(a))||void 0===o?void 0:o.data;if(this.notes.delete(a),this.queue.has(a)||u&&Object(Lt.d)(c,u)||(this.log("found note discrepancy: adding ".concat(a)),this.queue.add(a,Date.now())),e.timeRemaining()<=0)return void this.log("pausing for idle")}}catch(e){n.e(e)}finally{n.f()}}},{key:"refreshNoteList",value:function(){this.notes.size>0||(this.notes=new Set(this.store.getState().data.notes.keys()))}},{key:"requestIdleCallback",value:function(e){"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout((function(){var t=Date.now();e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),500)}}])&&Ri(t.prototype,n),r&&Ri(t,r),e}();function Pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Li(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Di=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Li(this,"bucketName",void 0),Li(this,"store",void 0),this.bucketName=t,this.store=n}var t,n,r;return t=e,(n=[{key:"getChangeVersion",value:function(){var e=this.store.getState().simperium.ghosts[0].get(this.bucketName);return Promise.resolve(e)}},{key:"setChangeVersion",value:function(e){return this.store.dispatch({type:"GHOST_SET_CHANGE_VERSION",bucketName:this.bucketName,version:e}),Promise.resolve()}},{key:"get",value:function(e){var t=this.store.getState().simperium.ghosts[1].get(this.bucketName),n=null==t?void 0:t.get(e);return Promise.resolve(null!=n?n:{key:e,data:{}})}},{key:"put",value:function(e,t,n){var r={key:e,data:n,version:t};return this.store.dispatch({type:"GHOST_SET_ENTITY",bucketName:this.bucketName,entityId:e,ghost:r}),Promise.resolve(r)}},{key:"remove",value:function(e){var t=this.store.getState().simperium.ghosts[1].get(this.bucketName),n=null==t?void 0:t.get(e);return this.store.dispatch({type:"GHOST_REMOVE_ENTITY",bucketName:this.bucketName,entityId:e}),Promise.resolve(n)}},{key:"eachGhost",value:function(e){var t;(null!==(t=this.store.getState().simperium.ghosts[1].get(this.bucketName))&&void 0!==t?t:new Map).forEach((function(t){return e(t)}))}}])&&Pi(t.prototype,n),r&&Pi(t,r),e}();function Mi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||Gi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xi(e){return function(e){if(Array.isArray(e))return Hi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Gi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gi(e,t){if(e){if("string"==typeof e)return Hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hi(e,t):void 0}}function Hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Fi=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"store",void 0),this.store=t}var t,n,r;return t=e,(n=[{key:"get",value:function(e,t){t(null,{id:e,data:this.store.getState().data.tags[0].get(e)})}},{key:"find",value:function(e,t){t(null,xi(this.store.getState().data.tags[0].entries()).map((function(e){var t=Mi(e,2);return{id:t[0],data:t[1]}})))}},{key:"remove",value:function(e,t){this.store.dispatch({type:"TAG_BUCKET_REMOVE",tagId:e}),t(null)}},{key:"update",value:function(e,t,n,r){this.store.dispatch({type:"TAG_BUCKET_UPDATE",tagId:e,tag:t,isIndexing:n}),r(null,{id:e,data:t})}}])&&Ui(t.prototype,n),r&&Ui(t,r),e}();function Bi(e){return function(e){if(Array.isArray(e))return Vi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Vi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vi(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zi=function(e){var t=e.dispatch,n=function(e,n,r){return new Notification(n,{body:r,tag:e}).onclick=function(){return t(m.a.ui.openNote(e))}};return function(e,t,r,o,a){return new Promise((function(e,t){"denied"!==Notification.permission?"granted"!==Notification.permission?Notification.requestPermission().then((function(n){switch(n){case"granted":return void e();case"denied":return void t();case"default":return void e()}})):e():t()})).then((function(){var i,c,u;if(!a&&o)if(0!==Object.getOwnPropertyNames(r).length)if("r"!==(null===(i=o.deleted)||void 0===i?void 0:i.o))if((null==r?void 0:r.publishURL)||!(null===(c=t.publishURL)||void 0===c?void 0:c.length))if(!(null==r||null===(u=r.systemTags)||void 0===u?void 0:u.includes("published"))||t.systemTags.includes("published"))if(!o.tags||o.content)1===Object.getOwnPropertyNames(o).length&&(o.systemTags&&(null==r?void 0:r.systemTags.includes("published"))!==t.systemTags.includes("published")||o.publishURL)||1===Object.getOwnPropertyNames(o).length&&o.systemTags||n(e,"Note Updated",t.content.slice(0,200)||"(no content)");else{var l=new Set((null==r?void 0:r.tags)||[]),s=new Set(t.tags),f=Bi(l.values()).filter((function(e){return!s.has(e)})),d=Bi(s.values()).filter((function(e){return!l.has(e)}));n(e,"Tags modified: ".concat(t.content.slice(0,20)||"(untitled)"),[d.length>0&&"Added: ".concat(d.join(", ").slice(0,20)),f.length>0&&"Removed: ".concat(f.join(", ").slice(0,20))].filter(Boolean).join("\n"))}else n(e,"Note Unpublished",t.content.slice(0,200)||"(no content)");else n(e,"Note Published",t.content.slice(0,200)||"(no content)");else n(e,o.deleted.v?"Note Trashed":"Note Restored",t.content.slice(0,200)||"(no content)");else n(e,"New Note",t.content.slice(0,200)||"(no content)")})).catch((function(){}))}},Ki=function(e){var t=[];return e.data.notes.forEach((function(n,r){var o,a=null===(o=e.simperium.ghosts[1].get("note"))||void 0===o?void 0:o.get(r);a&&Object(Lt.d)(n,a.data)||t.push(r)})),t};function Wi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$i(Object(n),!0).forEach((function(t){Qi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zi=li()("simperium-middleware"),Ji=function(e,t,r,o){return function(r){var a=r.dispatch,i=r.getState,c=ci()("chalk-bump-f49",t,{objectStoreProvider:function(e){switch(e.name){case"note":return new Ii(r);case"preferences":return new Oi;case"tag":return new Fi(r)}},ghostStoreProvider:function(e){return new Di(e.name,r)}});c.on("unauthorized",(function(){return e()})),function(e){return new Promise((function(t){e.on("message",(function n(r){if(r.startsWith("0:auth:")){var o=Wi(r.split("0:auth:"),2),a=(o[0],o[1]);e.off("message",n),t(a)}}))}))}(c).then((function(e){Zi("authenticated: ".concat(e)),a(m.a.settings.setAccountName(e))})),function(e,t){var n=t.dispatch,r=t.getState,o=-1/0;e.on("message",(function(){o=Date.now(),"green"!==r().simperium.connectionStatus&&n({type:"CHANGE_CONNECTION_STATUS",status:"green"})})),setInterval((function(){var e=Date.now()-o,t=r().simperium.connectionStatus;e>8e3&&"green"===t&&n({type:"CHANGE_CONNECTION_STATUS",status:"red"})}),1e3),window.addEventListener("online",(function(){"offline"===r().simperium.connectionStatus&&n({type:"CHANGE_CONNECTION_STATUS",status:"red"})})),window.addEventListener("offline",(function(){n({type:"CHANGE_CONNECTION_STATUS",status:"offline"})})),e.on("disconnect",(function(){n({type:"CHANGE_CONNECTION_STATUS",status:navigator.onLine?"red":"offline"})}))}(c,r);var u=c.bucket("note");u.channel.on("update",(function(e,t,n,r,o){a({type:"REMOTE_NOTE_UPDATE",noteId:e,note:t,remoteInfo:{original:n,patch:r,isIndexing:o}})})),u.channel.on("remove",(function(e){return a({type:"REMOTE_NOTE_DELETE_FOREVER",noteId:e})})),u.channel.on("update",zi(r)),u.channel.localQueue.on("send",(function(e){a({type:"SUBMIT_PENDING_CHANGE",entityId:e.id,ccid:e.ccid})})),u.channel.on("acknowledge",(function(e,t){a({type:"ACKNOWLEDGE_PENDING_CHANGE",entityId:e,ccid:t.ccid})}));var l=c.bucket("tag");l.channel.on("update",(function(e,t,n,r,o){a({type:"REMOTE_TAG_UPDATE",tagId:e,tag:t,remoteInfo:{original:n,patch:r,isIndexing:o}})})),l.channel.on("remove",(function(e){return a({type:"REMOTE_TAG_DELETE",tagId:e})}));var s=c.bucket("preferences");s.channel.on("update",(function(e,t){"preferences-key"===e&&a({type:"SET_ANALYTICS",allowAnalytics:!!t.analytics_enabled})})),o&&n.e(13).then(n.bind(null,1314)).then((function(e){var t=e.content,n=Date.now()/1e3;u.add({content:t,deleted:!1,systemTags:[],creationDate:n,modificationDate:n,shareURL:"",publishURL:"",tags:[]})}));var f=new hi(u),d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return f.add(e,Date.now()+t)},p=new hi(l),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return p.add(e,Date.now()+t)};return new ki(r,f),function(t){return function(n){console.log(n);var o=r.getState(),p=t(n),m=r.getState();switch(n.type){case"ADD_NOTE_TAG":return o.data.tags[1].has(n.tagName.toLocaleLowerCase())?h(m.data.tags[1].get(n.tagName.toLocaleLowerCase())):l.add({name:n.tagName}).then((function(e){return a({type:"CONFIRM_NEW_TAG",tagName:n.tagName,originalTagId:m.data.tags[1].get(n.tagName.toLocaleLowerCase()),newTagId:e.id,tag:e.data})})),d(n.noteId),p;case"REMOVE_NOTE_TAG":return d(n.noteId),p;case"CREATE_NOTE_WITH_ID":return u.add(Yi({content:"",tags:[],creationDate:Date.now()/1e3,modificationDate:Date.now()/1e3,deleted:!1,systemTags:[],shareURL:"",publishURL:""},n.note)).then((function(e){return a({type:"CONFIRM_NEW_NOTE",originalNoteId:n.noteId,newNoteId:e.id,note:e.data})})),p;case"INSERT_TASK_INTO_NOTE":case"EDIT_NOTE":return d(n.noteId),p;case"FILTER_NOTES":case"OPEN_NOTE":case"SELECT_NOTE":var y,g,v,b=null!==(y=null!==(g=n.noteId)&&void 0!==g?g:null===(v=n.meta)||void 0===v?void 0:v.nextNoteToOpen)&&void 0!==y?y:i().ui.openedNote;return b&&setTimeout((function(){i().ui.openedNote===b&&u.getRevisions(b).then((function(e){a({type:"LOAD_REVISIONS",noteId:b,revisions:e.map((function(e){var t=e.data;return[e.version,t]})).sort((function(e,t){return e[0]-t[0]}))})}))}),250),p;case"IMPORT_NOTE_WITH_ID":case"MARKDOWN_NOTE":case"PIN_NOTE":case"PUBLISH_NOTE":case"RESTORE_NOTE":case"RESTORE_NOTE_REVISION":case"TRASH_NOTE":return d(n.noteId,10),p;case"DELETE_NOTE_FOREVER":return setTimeout((function(){return u.remove(n.noteId)}),10),p;case"RENAME_TAG":var E=o.data.tags[1].get(n.oldTagName.toLocaleLowerCase());return E&&h(E),p;case"REORDER_TAG":return m.data.tags[0].forEach((function(e,t){h(t)})),p;case"SET_ANALYTICS":return s.get("preferences-key").then((function(e){s.update("preferences-key",Yi(Yi({},e.data),{},{analytics_enabled:n.allowAnalytics}),{sync:!0})})),p;case"TOGGLE_ANALYTICS":return s.get("preferences-key").then((function(e){s.update("preferences-key",Yi(Yi({},e.data),{},{analytics_enabled:!e.data.analytics_enabled}),{sync:!0})})),p;case"TRASH_TAG":var O=o.data.tags[1].get(n.tagName.toLocaleLowerCase());return O&&l.remove(O),p;case"LOGOUT":var w,S={notes:Ki(m),preferences:[],tags:[]};S.notes.forEach((function(e){return f.add(e,Date.now())}));var N=S.notes.length<4?S.notes.map((function(e){var t,n,r=null===(t=m.simperium.ghosts[1].get("note"))||void 0===t?void 0:t.get(e),o=m.data.notes.get(e),a=null!==(n=null==o?void 0:o.content)&&void 0!==n?n:"",i=a.indexOf("\n"),c=i>=0?Math.min(i,60):60,u=r?(null==o?void 0:o.deleted)?"trashed":"changed":"new",l=a.slice(0,c)||"(Blank note)";return"(".concat(u,") ").concat(l)})).join("\n"):"".concat(S.notes.length," notes may not be synchronized");return S.notes.length>0&&!(null===(w=window.electron)||void 0===w?void 0:w.confirmLogout(N))||(c.end(),e()),p}return p}}}},Xi=(n(31),function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Boolean(e),n=t?"Development":"Production",r=e,o=r?"warn":"info";return console[o]("Simperium config: ".concat(n)),t});var ec=Oo()(),tc=function(e,t,n,r){Jt.a.setAppElement("#root"),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Do().then((function(e){var n=ei(e,2),r=n[0],o=n[1];return Object(wo.e)(ri,r,oi(No()("settings",{key:"simpleNote",slicer:function(e){return function(t){return Xa({},e,Object(c.omit)(t[e],["accountName","focusModeEnabled"]))}}}),wo.a.apply(void 0,[la,Aa,Oa,pt,Ta].concat(Ja(A.a?[sa]:[]),t,Ja(o?[o]:[])))))}))}(Ji(e,t,0,r)).then((function(e){e.dispatch(m.a.settings.setAccountName(n)),Object.defineProperties(window,{dispatch:{get:function(){return e.dispatch}},state:{get:function(){return e.getState()}}}),Object(ai.render)(o.a.createElement(a.a,{store:e},o.a.createElement(bo,{isDevConfig:Xi(null==ec?void 0:ec.development)})),document.getElementById("root"))}))}},152:function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"editNote",(function(){return a})),n.d(r,"exportNotes",(function(){return i})),n.d(r,"importNote",(function(){return c})),n.d(r,"markdownNote",(function(){return u})),n.d(r,"pinNote",(function(){return l})),n.d(r,"publishNote",(function(){return s})),n.d(r,"toggleAnalytics",(function(){return f}));var o={};n.r(o),n.d(o,"remoteNoteUpdate",(function(){return p}));var a=function(e,t){return{type:"EDIT_NOTE",noteId:e,changes:t}},i=function(){return{type:"EXPORT_NOTES"}},c=function(e){return{type:"IMPORT_NOTE",note:e}},u=function(e,t){return{type:"MARKDOWN_NOTE",noteId:e,shouldEnableMarkdown:t}},l=function(e,t){return{type:"PIN_NOTE",noteId:e,shouldPin:t}},s=function(e,t){return{type:"PUBLISH_NOTE",noteId:e,shouldPublish:t}},f=function(){return{type:"TOGGLE_ANALYTICS"}},d=n(579),p=function(e,t){return{type:"REMOTE_NOTE_UPDATE",noteId:e,note:t}},m=n(177);t.a={data:r,simperium:o,settings:d,ui:m}},177:function(e,t,n){"use strict";n.r(t),n.d(t,"closeDialog",(function(){return r})),n.d(t,"closeNote",(function(){return o})),n.d(t,"createNote",(function(){return a})),n.d(t,"deleteOpenNoteForever",(function(){return i})),n.d(t,"filterNotes",(function(){return c})),n.d(t,"focusSearchField",(function(){return u})),n.d(t,"logout",(function(){return l})),n.d(t,"openNote",(function(){return s})),n.d(t,"openTag",(function(){return f})),n.d(t,"restoreOpenNote",(function(){return d})),n.d(t,"selectNoteAbove",(function(){return p})),n.d(t,"selectNoteBelow",(function(){return m})),n.d(t,"selectTrash",(function(){return h})),n.d(t,"showAllNotes",(function(){return y})),n.d(t,"showDialog",(function(){return g})),n.d(t,"storeRevisions",(function(){return v})),n.d(t,"toggleRevisions",(function(){return b})),n.d(t,"search",(function(){return E})),n.d(t,"selectNote",(function(){return O})),n.d(t,"toggleEditMode",(function(){return w})),n.d(t,"toggleNavigation",(function(){return S})),n.d(t,"toggleNoteList",(function(){return N})),n.d(t,"toggleNoteInfo",(function(){return T})),n.d(t,"toggleTagDrawer",(function(){return _})),n.d(t,"toggleTagEditing",(function(){return I})),n.d(t,"trashOpenNote",(function(){return j}));var r=function(){return{type:"CLOSE_DIALOG"}},o=function(){return{type:"CLOSE_NOTE"}},a=function(){return{type:"CREATE_NOTE"}},i=function(){return{type:"DELETE_OPEN_NOTE_FOREVER"}},c=function(e,t){return{type:"FILTER_NOTES",noteIds:e,tagIds:t}},u=function(){return{type:"FOCUS_SEARCH_FIELD"}},l=function(){return{type:"LOGOUT"}},s=function(e){return{type:"OPEN_NOTE",noteId:e}},f=function(e){return{type:"OPEN_TAG",tagId:e}},d=function(){return{type:"RESTORE_OPEN_NOTE"}},p=function(){return{type:"SELECT_NOTE_ABOVE"}},m=function(){return{type:"SELECT_NOTE_BELOW"}},h=function(){return{type:"SELECT_TRASH"}},y=function(){return{type:"SHOW_ALL_NOTES"}},g=function(e){return{type:"SHOW_DIALOG",dialog:e}},v=function(e,t){return{type:"STORE_REVISIONS",noteId:e,revisions:t}},b=function(){return{type:"REVISIONS_TOGGLE"}},E=function(e){return{type:"SEARCH",searchQuery:e}},O=function(e){return{type:"SELECT_NOTE",noteId:e}},w=function(){return{type:"TOGGLE_EDIT_MODE"}},S=function(){return{type:"NAVIGATION_TOGGLE"}},N=function(){return{type:"NOTE_LIST_TOGGLE"}},T=function(){return{type:"NOTE_INFO_TOGGLE"}},_=function(e){return{type:"TAG_DRAWER_TOGGLE",show:e}},I=function(){return{type:"TAG_EDITING_TOGGLE"}},j=function(){return{type:"TRASH_OPEN_NOTE"}}},203:function(e,t,n){"use strict";var r=n(0);t.a=function(e){var t=e.children,n=e.headingLevel,o=void 0===n?3:n;return Object(r.createElement)("h".concat(o),{className:"panel-title theme-color-fg-dim"},t)}},204:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return i}));var r=function(e){return e.browser.windowWidth<=750},o=function(e){return"system"===e.settings.theme?e.browser.systemTheme:e.settings.theme},a=function(e,t){return!!(e&&t&&e.content===t.content&&e.creationDate===t.creationDate&&e.modificationDate===t.modificationDate&&!!e.deleted==!!t.deleted&&e.publishURL===t.publishURL&&e.shareURL===t.shareURL&&e.tags.length===t.tags.length&&e.systemTags.length===t.systemTags.length&&e.tags.every((function(e){return t.tags.includes(e)}))&&e.systemTags.every((function(e){return t.systemTags.includes(e)})))},i=function(e,t){var n,r;return!a(e.data.notes.get(t),null===(n=e.simperium.ghosts[1].get("note"))||void 0===n||null===(r=n.get(t))||void 0===r?void 0:r.data)}},252:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i}));n(3);function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=function(e){return e.replace(/(?:\btag:)([^\s,]+)/g,"").trim()},i=function(e){if(!e)return[];for(var t,n=/(?:")((?:"|[^"])+)(?:")/g,o="",i=a(e),c=[];null!==(t=n.exec(i));)c.push(t[0].slice(1,-1)),o+=i.slice(n.lastIndex,t.index);(n.lastIndex>0||0===c.length)&&n.lastIndex<i.length&&(o+=i.slice(n.lastIndex));var u=o.split(/[\b\s]/g).map((function(e){return e.trim()})).filter((function(e){return e}));return[].concat(c,r(u))};Object.freeze([])},381:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0),o=n.n(r);function a(){return o.a.createElement("svg",{className:"logo",width:"96",height:"96",viewBox:"0 0 176 176"},o.a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},o.a.createElement("path",{d:"M152.37 87.885c0-34.066-27.182-63.42-59.45-64.854-6.416-.284-12.647 1.432-17.58 5.573-5.002 4.196-8.07 10.09-8.638 16.595C65.43 59.73 78.537 68.618 91.225 72.09c30.69 8.398 48.462 30.086 46.655 56.757 9.057-11.194 14.49-25.442 14.49-40.962zM84.345 97.24c-28.696-7.853-45.817-29.174-43.62-54.317.027-.287.073-.567.102-.852C29.19 53.846 22 70.023 22 87.886c0 34.348 27.955 63.828 60.277 64.933 7.227.248 14.214-1.685 19.766-6.344 5.67-4.757 9.146-11.435 9.79-18.808 1.703-19.463-16.492-27.417-27.488-30.426z",fill:"#4895d9"})))}},383:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1322);t.a=function(e){var t=e.children,n=e.shouldMount,r=e.wrapperClassName,i=void 0===r?"":r;return o.a.createElement(a.a,{in:n,classNames:"transition-fade-in-out",mountOnEnter:!0,timeout:200,unmountOnExit:!0},o.a.createElement("div",{className:i},t))}},387:function(e,t,n){"use strict";var r=/^(?:[^@]+)@(?:.+)(?:\.[^.]{2,})$/;t.a=function(e){return r.test(e)}},579:function(e,t,n){"use strict";n.r(t),n.d(t,"increaseFontSize",(function(){return r})),n.d(t,"decreaseFontSize",(function(){return o})),n.d(t,"resetFontSize",(function(){return a})),n.d(t,"activateTheme",(function(){return i})),n.d(t,"setNoteDisplay",(function(){return c})),n.d(t,"setLineLength",(function(){return u})),n.d(t,"toggleKeyboardShortcuts",(function(){return l})),n.d(t,"toggleSortOrder",(function(){return s})),n.d(t,"setSortType",(function(){return f})),n.d(t,"toggleSortTagsAlpha",(function(){return d})),n.d(t,"setAccountName",(function(){return p})),n.d(t,"toggleFocusMode",(function(){return m})),n.d(t,"toggleSpellCheck",(function(){return h})),n.d(t,"toggleAutoHideMenuBar",(function(){return y}));var r=function(){return{type:"INCREASE_FONT_SIZE"}},o=function(){return{type:"DECREASE_FONT_SIZE"}},a=function(){return{type:"RESET_FONT_SIZE"}},i=function(e){return{type:"setTheme",theme:e}},c=function(e){return{type:"setNoteDisplay",noteDisplay:e}},u=function(e){return{type:"setLineLength",lineLength:e}},l=function(){return{type:"KEYBOARD_SHORTCUTS_TOGGLE"}},s=function(){return{type:"TOGGLE_SORT_ORDER"}},f=function(e){return{type:"setSortType",sortType:e}},d=function(){return{type:"TOGGLE_SORT_TAGS_ALPHA"}},p=function(e){return{type:"setAccountName",accountName:e}},m=function(){return{type:"TOGGLE_FOCUS_MODE"}},h=function(){return{type:"TOGGLE_SPELLCHECK"}},y=function(){return{type:"TOGGLE_AUTO_HIDE_MENU_BAR"}}},591:function(e,t,n){"use strict";n.d(t,"b",(function(){return O}));var r=n(0),o=n.n(r),a=n(130),i=n(9),c=n(177);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,n,a,i=h(c);function c(){var e;d(this,c);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b(g(e=i.call.apply(i,[this].concat(n))),"updateSearch",(function(t){var n=e.props,r=n.searchQuery,o=n.onSearch,a=r.trim().split(" ");a.splice(-1,1,t);var i=a.join(" ");o(i+=" ")})),e}return t=c,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.filteredTags,a=t.tags;return o.a.createElement(r.Fragment,null,n.length>0&&o.a.createElement("div",{className:"tag-suggestions"},o.a.createElement("div",{className:"note-list-header"},"Search by Tag"),o.a.createElement("ul",{className:"tag-suggestions-list"},n.map((function(t){return o.a.createElement("li",{key:t,id:t,className:"tag-suggestion-row",onClick:function(){return e.updateSearch("tag:".concat(a.get(t).name))}},o.a.createElement("div",{className:"tag-suggestion",title:a.get(t).name},"tag:",a.get(t).name))})))))}}])&&p(t.prototype,n),a&&p(t,a),c}(r.Component);b(E,"displayName","TagSuggestions");var O=function(e,t){var n=t.trim().toLowerCase().split(" ").pop();if(!n)return[];var r,o=n.startsWith("tag:")&&n.length>4,a=o?n.slice(4):n,i=o?function(e){var t=e.name;return t.toLowerCase()!==a&&t.toLowerCase().startsWith(a)}:function(e){return e.name.toLowerCase().includes(a)},c=[],u=function(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=s(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o,a=!0,i=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(i)throw o}}}}(e.entries());try{for(u.s();!(r=u.n()).done;){var f=l(r.value,2),d=f[0];if(i(f[1])&&c.push(d),c.length>=5)return c}}catch(e){u.e(e)}finally{u.f()}return c};t.a=Object(a.b)((function(e){var t=e.data,n=e.ui,r=n.searchQuery;return{filteredTags:n.tagSuggestions,searchQuery:r,tags:t.tags[0]}}),(function(e){return{onSearch:function(t){e(Object(c.search)(t)),i.a.tracks.recordEvent("list_notes_searched")}}}))(E)},869:function(e,t){},871:function(e,t){}}]);